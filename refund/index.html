<!DOCTYPE html>
<html lang="fa">
<head>
    <title>مستندات وندار | ارایه دهنده راهکارهای پرداخت</title>
    <meta name="description" content="">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <meta name="format-detection" content="telephone=no">
    <link href="https://fonts.googleapis.com/css2?family=Markazi+Text&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.rtl.css">
    <link rel='icon' href='https://cdn.vandar.ir/public/logos/icon-logo.svg' type='image/x-icon' >
</head>
<body dir="rtl">
<header id="header">
    <h1>Vandar</h1>
    <h2>مستندات وندار</h2>
</header>

<div class="container">
    <div class="row">
        <div class="col-sm-3">
            <div id="myHeader">
                <ul>
                    <!--                <li>-->
                    <!--                    <a href="https://vandarpay.github.io/docs/" class="active">مفاهیم اولیه</a>-->
                    <!--                    &lt;!&ndash;                    <div class="sidenav">&ndash;&gt;-->
                    <!--                </li>-->

                    <li>
                        <button class="dropdown-btn">مفاهیم اولیه
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/#postman">Postman</a><br>
                            <a href="https://vandarpay.github.io/docs/#start">شروع کنید</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">درگاه پرداخت

                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/ipg/#payment-gateways">ساخت و ویرایش درگاه پرداخت</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#active-ipg">فعال کردن درگاه پرداخت</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#implementation">پیاده سازی فنی درگاه پرداخت</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-1">مرحله اول</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-2">مرحله دوم</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-3">مرحله سوم</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-4">مرحله چهارم</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">دریافت توکن
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/auth/#step-1">مرحله اول</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">کسب‌وکار
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/business/#information">اطلاعات</a><br>
                            <a href="https://vandarpay.github.io/docs/business/#users">کاربران</a><br>
                            <!--                        </div>-->
                        </div>
                        <!--                        <a href="https://vandarpay.github.io/docs/business">کسب‌وکار</a>-->
                    </li>
                    <li>
                        <button class="dropdown-btn">صورت حساب
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/invoice/#wallet">کیف پول</a><br>
                            <a href="https://vandarpay.github.io/docs/invoice/#transactions">صورت حساب</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">سرویس تسویه
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/settlement/#settlements">لیست تسویه ها</a><br>
                            <a href="https://vandarpay.github.io/docs/settlement/#request-settlement">ثبت درخواست تسویه</a><br>
                            <a href="https://vandarpay.github.io/docs/settlement/#cancel">لغو یک تسویه</a><br>
                            <a href="https://vandarpay.github.io/docs/settlement/#health">لیست بانک های تسویه</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">  سرویس تسویه گروهی
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/batch-settlement/#batch-settlements-intro">مقدمه</a><br>
                            <a href="https://vandarpay.github.io/docs/batch-settlement/#batch-settlements-index">لیست تسویه های گروهی</a><br>
                            <a href="https://vandarpay.github.io/docs/batch-settlement/#batch-settlements-show">جزییات یک تسویه گروهی</a><br>
                            <a href="https://vandarpay.github.io/docs/batch-settlement/#batch-settlement-store">ثبت یک تسویه گروهی</a><br>
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">سرویس پرداخت خودکار
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/subscription/#directdebit">مقدمه</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/#get-token">سرویس دریافت توکن</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/#withdrawal">سرویس برداشت وجه</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/#error">لیست خطاهای دریافتی</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/better-product-design/" target="_blank">طراحی محصولی بهتر</a><br>

                            <!--                        </div>-->
                        </div>
                    </li>
<!--                    <li>-->
<!--                        <button class="dropdown-btn">سرویس پرداخت با وندار-->
<!--                            <br>-->
<!--                            <i class="fa fa-caret-down"></i>-->
<!--                        </button>-->
<!--                        <div class="dropdown-container">-->
<!--                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#overview">معرفی سرویس</a><br>-->
<!--                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#intro">مقدمه</a><br>-->
<!--                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#send">دریافت توکن</a><br>-->
<!--                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#redirect">انتقال کاربر</a><br>-->
<!--                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#inquiry">استعلام</a><br>-->
<!--                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#verify">تایید</a><br>-->
<!--                        </div>-->
<!--                    </li>-->
                    <li>
                        <button class="dropdown-btn">سرویس مشتریان
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/customers/#customers">مقدمه</a><br>
                            <a href="https://vandarpay.github.io/docs/customers/#base">مشتریان</a><br>
                            <a href="https://vandarpay.github.io/docs/customers/#wallet">کیف پول</a><br>
                            <a href="https://vandarpay.github.io/docs/customers/#transactions">تراکنش</a><br>
                            <a href="https://vandarpay.github.io/docs/customers/#sheba">شبا</a><br>
                            <a href="https://vandarpay.github.io/docs/customers/#card">کارت</a><br>
                            <a href="https://vandarpay.github.io/docs/customers/#authentication">احراز هویت</a><br>
                            <a href="https://vandarpay.github.io/docs/customers/#logs">گزارشات</a><br>
                            <a href="https://vandarpay.github.io/docs/customers/#cash-in-code">شناسه پرداخت</a><br>
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">سرویس معاملات امن
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/miando/#intro">مقدمه</a><br>
                            <a href="https://vandarpay.github.io/docs/miando/#customers">مشتریان</a><br>
                            <a href="https://vandarpay.github.io/docs/miando/#agreements">معاملات</a><br>
                            <a href="https://vandarpay.github.io/docs/miando/#tickets">تیکت ها</a><br>
                            <a href="https://vandarpay.github.io/docs/miando/#webhooks">وبهوک</a><br>
                        </div>
                    </li>
					<li>
						<button class="dropdown-btn">ابزار واریز بانکی
							<br>
							<i class="fa fa-caret-down"></i>
						</button>
						<div class="dropdown-container">
							<a href="https://vandarpay.github.io/docs/cash-in/#intro">مقدمه</a><br>
							<a href="https://vandarpay.github.io/docs/cash-in/#ibans-list">لیست شماره شباها</a><br>
							<a href="https://vandarpay.github.io/docs/cash-in/#get-balance">دریافت موجودی حساب</a><br>
							<a href="https://vandarpay.github.io/docs/cash-in/#deposit">درخواست واریز</a><br>
						</div>
					</li>
                    <li>
                        <a href="https://vandarpay.github.io/docs/refund">بازگشت وجه</a>
                    </li>
                    <li>
                        <a href="https://vandarpay.github.io/docs/banks">بانک‌ها</a>
                    </li>
                    <li>
                        <a href="https://vandarpay.github.io/docs/errors">خطا‌ها</a>
                    </li>
                </ul>
            </div>

        </div>
        <div class="col-sm-9">
                <article class="content">

                    <div>
                        آخرین تغییرات: 1400/08/01
                    </div>

                    <div class="article" id="refund">
                        <h2 class="article-header" id="refund">
                          <a href="#refund-">بازگشت وجه</a>
                        </h2>
                        <div>
                            <p>
                              برای بازگرداندن مبلغ یک تراکنشِ موفقِ درگاه پرداخت، به شماره کارت پرداخت‌کننده می‌توان از ابزار بازگشت وجه استفاده کرد.
                            </p>
                            <h3>شرایط لازم برای بازگشت وجه:</h3>
                            <ul>
                              <li>فعال بودن ابزار بازگشت وجه</li>
                              <li>موفق بودن تراکنش</li>
                              <li>داشتن موجودی کافی در کیف‌پول</li>
                            </ul>
                            <h3>ثبت درخواست بازگشت وجه:</h3>
                            <p>
                              برای ثبت درخواست بازگشت وجه یک تراکنش موفق کافی‌ست نشانی زیر را صدا بزنید:
                            </p>
                            <pre>
<span class="key">METHOD:</span> POST
<span class="key">URL:</span> https://api.vandar.io/v3/business/{businessName}/transaction/{transaction_id}/refund
<span class="key">Header:</span><br>Authorization : Bearer {token}<br>Accept : application/json<br>Content-Type : application/json</pre>
                            
                            <p>
                              در این نشانی:
                            </p>
                            <ul>
                              <li>businessName نام انگلیسی کسب‌وکار است که در هنگام ثبت کسب‌وکار به وندار ارائه‌ شده.</li>
                              <li>transaction_id شناسه‌ی یکتای تراکنش در وندار است.</li>
                            </ul>
                            <h3 class="sub-title">
                                پارامترهای مجاز
                            </h3>
                            <table>
                                <tr>
                                    <th>Name</th>
                                    <th>Type</th>
                                    <th>Status</th>
                                </tr>
                                <tr>
                                    <td>payment_number</td>
                                    <td>string</td>
                                    <td>optional</td>
                                </tr>
                                <tr>
                                    <td>amount</td>
                                    <td>string</td>
                                    <td>optional</td>
                                </tr>
                                <tr>
                                    <td>description</td>
                                    <td>string</td>
                                    <td>optional</td>
                                </tr>
                                <tr>
                                    <td>notify_url</td>
                                    <td>url</td>
                                    <td>optional</td>
                                </tr>

                            </table>
                            <h3 class="sub-title">
                                توضیحات
                            </h3>
                            <ul>
                                <li>payment_number باید برای هر درخواست مقداری یکتا باشد.</li>
                                <li>amount در صورت ارسال، این مقدار از کل مبلغ تراکنش برگردانده می شود.</li>
                                <li>description محل درج توضیحات است.</li>
                                <li>notify_url  بعد از مشخص شدن وضعیت بازگشت وجه این آدرس صدا زده می‌شود.</li>
                            </ul>
                            <h3 class="sub-title">
                                نمونه json
                            </h3>
                            <pre>
{
    "<span class="key">payment_number</span>": "13456",
    "<span class="key">amount</span>": "500000",
    "<span class="key">description</span>": "160969188194 بازگشت وجه تراکنش "
}
                            </pre>

<h3 class="sub-title">
                                نمونه پاسخ دریافتی موفق
                            </h3>
                            <pre>
<span class="key">HTTP/1.1</span> 200
{
    "<span class="key">status</span>": 1,
    "<span class="key">data</span>": {
        "<span class="key">message</span>": "  عملیات بازگشت وجه با موفقیت ثبت گردید. ",
        "<span class="key">results</span>": [
        {
          "<span class="key">id</span>": "e2ee0fb0-c070-11eb-8d4b-f782f5608cc2",
          "<span class="key">retry_count</span>": "01",
          "<span class="key">gateway_transaction_id</span>": 162203075684,
          "<span class="key">amount</span>": "1500000000",
          "<span class="key">wage</span>": 1000,
          "<span class="key">payment_number</span>": null,
          "<span class="key">status</span>": "PENDING",
          "<span class="key">description</span>": "160969188194 بازگشت وجه تراکنش",
          "<span class="key">wallet</span>": "99999889000",
          "<span class="key">refund_date</span>": "1400/03/08 15:57:43",
          "<span class="key">created_at</span>": "1400/03/08 15:57:44"
        },
        {
          "<span class="key">id</span>": "e2ee0fb0-c070-11eb-8d4b-f782f5608cc3",
          "<span class="key">retry_count</span>": "01",
          "<span class="key">gateway_transaction_id</span>": 162203075685,
          "<span class="key">amount</span>": "500000000",
          "<span class="key">wage</span>": 1000,
          "<span class="key">payment_number</span>": null,
          "<span class="key">status</span>": "PENDING",
          "<span class="key">description</span>": "160969188194 بازگشت وجه تراکنش",
          "<span class="key">wallet</span>": "99999889000",
          "<span class="key">refund_date</span>": "1400/03/08 15:57:43",
          "<span class="key">created_at</span>": "1400/03/08 15:57:44"
        },
        ]
    },
}</pre>

                            <h3 class="sub-title">
                                توضیحات
                            </h3>
                            <ul>
                                <li>results آرایه ای از تراکنش های بازگشتی است. به ازای هر ۱۵ میلیون تومان از مبلغ بازگشت وجه یک تراکنش ایجاد می شود. </li>
                                <li>Gateway_transaction_id شناسه تراکنش عملیات بازگشت وجه است.</li>
                                <li>Amount مبلغ بازگردانده شده به ریال</li>
                                <li>Wage کارمزد بازگشت وجه به ریال</li>
                                <li>Status وضعیت تراکنش است که در زمان ثبت به صورت PENDING نمایش داده می‌شود. </li>
                                <li>Wallet موجودی کیف‌پول پس از بازگشت وجه به ریال</li>
                                <li>refund_date تاریخ و زمان انجام عملیات بازگشت وجه. این نخستین زمانی است که مبلغ قابل برداشت کیف‌پول برای انجام تراکنش بازگشت وجه کافی باشد (متناسب با زمان بروزرسانی مبلغ قابل برداشت کیف‌پول). در این زمان درخواست بازگشت وجه به بانک ارسال می‌شود.</li>
                            </ul>

                            <!-- <div class="info">
                                <strong>نکته!</strong> واحد پول استفاده شده در وب‌سرویس وندار فقط تومان می‌باشد
                            </div> -->
                            <h3 class="sub-title">
                                نمونه پاسخ دریافتی ناموفق
                            </h3>
                            <pre>
<span class="key">HTTP/1.1</span> 401
{
    "<span class="key">status</span>": 0,
    "<span class="key">error</span>": "Unauthenticated"
}</pre>

                            <h3 class="sub-title">
                                توضیحات
                            </h3>
                            <ul>
                                <li>status: درصورت ناموفق بودن درخواست این مقدار برابر با 0 می باشد</li>
                                <li>error: در صورت منقضی شدن Token ارسالی در Header و یا اشتباه بودن Token با مقدار Unauthenticated برگشت داده می‌شود. </li>
                            </ul>


                            <br>
                            <div class="info">
                                <strong>نکته! </strong>
                                <br>
                                در صورتی که مقدار پارامتر notify_url تکمیل شود، پس از انجام تراکنش تسویه، وبهوکی با فرمت زیر به آدرس ثبت شده ارسال خواهد شد
                                اطلاعات وبهوک به شکل  form_data ارسال می شوند.
                            </div>

                            <pre>
<span class="key">HTTP/1.1</span> 200
{
    "id": "865e9d07-2c96-41ef-8f61-30de27fb9954"
    "iban_id": "72a8aab1-04c9-417e-9971-2f7bfe121b53"
    "transaction_id": "164258101221"
    "amount": "2500000"
    "payment_number": "123456"
    "status": "DONE"
    "settlement_date": "2022-01-19"
    "settlement_date_jalali": "1400/10/29"
    "revised_transaction_id": ""
    "ref_code": "140010290622047785"
}</pre>

                            <ul>
                                <li>id: شناسه یکتای تسویه</li>
                                <li>iban_id: شناسه یکتای شماره شبا</li>
                                <li>transaction_id:شناسه یکتای تراکنش در وندار</li>
                                <li>amount: مبلغ تسویه به ریال</li>
                                <li>payment_number: شناسه پرداخت</li>
                                <li>status: وضعیت تسویه</li>
                                <li>settlement_date: تاریخ انجام تسویه (میلادی)</li>
                                <li>settlement_date_jalali:تاریخ انجام تسویه (شمسی)</li>
                                <li>revised_transaction_id: شناسه یکتای تراکنش اصلاحی برای تسویه های کنسل شده </li>
                                <li>ref_code: (یا همان کد RRN) شناسه یکتای مرجع تسویه انجام شده برای تسویه های موفق</li>
                            </ul>

                            <br><br>
                        </div>
                        

                    </div>
                </article>
        </div>
    </div>
</div>

<footer id="footer">
    <div class="container">
        <div class="row" style="text-align: center">
            <div class="col-sm-8 col-xs-6 no-padding-bottom">
                <a href="https://github.com/vandarpay/docs" target="_blank">مخزن گیت‌هاب</a>
            </div>
            <div class="col-sm-4 col-xs-6 text-right no-padding-bottom">2020 &copy; <a href="https://vandar.io" target="_blank">وندار</a></div>
        </div>
    </div>

</footer>
<button onclick="goTop()" id="go_top" title="Go to top">^</button>
<script>
    /* Loop through all dropdown buttons to toggle between hiding and showing its dropdown content - This allows the user to have multiple dropdowns without any conflict */
    var dropdown = document.getElementsByClassName("dropdown-btn");
    var i;

    for (i = 0; i < dropdown.length; i++) {
        dropdown[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var dropdownContent = this.nextElementSibling;
            if (dropdownContent.style.display === "block") {
                dropdownContent.style.display = "none";
            } else {
                dropdownContent.style.display = "block";
            }
        });
    }


    var header = document.getElementById("myHeader");
    var sticky = header.offsetTop;

    window.onscroll = function () {
        var top = document.getElementById("go_top");
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            top.style.display = "block";
        } else {
            top.style.display = "none";
        }
        if (window.pageYOffset  > 320) {
            header.classList.add("fix-sidebar");
        } else {
            header.classList.remove("fix-sidebar");
        }

    };

    function goTop() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    }
</script>
</body>
</html>
