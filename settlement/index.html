<!DOCTYPE html>
<html lang="fa">
<head>
    <title>مستندات وندار | ارایه دهنده راهکارهای پرداخت</title>
    <meta name="description" content="">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <meta name="format-detection" content="telephone=no">
    <link href="https://fonts.googleapis.com/css2?family=Markazi+Text&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.rtl.css">
    <link rel='icon' href='../favicon.ico' type='image/x-icon' >
</head>
<body dir="rtl">
<header id="header">
    <h1>Vandar</h1>
    <h2>مستندات وندار</h2>
</header>

<div class="container">
    <div class="row">
        <div class="col-sm-3">
            <ul>
                <li>
                    <a href="https://vandarpay.github.io/docs/">مفاهیم اولیه</a>
                </li>
                <li>
                    <a href="https://vandarpay.github.io/docs/ipg" class="active">درگاه پرداخت</a>
                </li>
                <li>
                    <a href="https://vandarpay.github.io/docs/settlement" class="active">تسویه با شماره شبا</a>
                </li>
            </ul>
        </div>
        <div class="col-sm-9">
            <article class="content">
                <div class="article" id="ipg">
                    <h2 class="article-header">تسویه با شماره شبا</h2>
                    <div>
                        <h3 class="title">
                            <strong>مقدمه</strong>
                        </h3>
                        <p>در ای بخش راجع به فرآیند تسویه توضیح داده خواهد شد.</p> <!--TODO: Content.-->

                    </div>
                    <div>
                        <h3 class="title">
                            <strong><a href="#list">لیست</a></strong>
                        </h3>
                        <p>در این بخش شما می‌توانید همه‌ی تسویه‌هایی را که تا به حال ثبت کرده‌اید، مشاهده نمایید.</p>
                        <div class="info">
                            <strong>نکته! </strong>پارامتر deductible_amount نشان‌دهنده مبلغ قابل برداشت و پارامتر blocked_amount نشان‌دهنده مبلغ مسدود‌شده در حساب است.
                        </div>
                        <pre>
<span class="key">METHOD:</span> GET
<span class="key">URL:</span> https://api.vandar.io/v2.1/business/{business}/settlement
                        </pre>
                        <p>پارامتر {business} همان نام انگلیسی کسب و کاری است که قصد مشاهده‌ی تسویه‌های آن را دارید.</p>

                        <!--TODO: Header json sample?-->

                        <h3 class="sub-title">
                            نمونه کد برای درخواست این API:
                        </h3>
                        <pre> <!--TODO: Different programming languages with tab-->
$curl = curl_init();

curl_setopt_array($curl, array(
  CURLOPT_URL => "https://api.vandar.io/v2.1/business/{business}/settlement",
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_ENCODING => "",
  CURLOPT_MAXREDIRS => 10,
  CURLOPT_TIMEOUT => 30,
  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
  CURLOPT_CUSTOMREQUEST => "GET",
  CURLOPT_POSTFIELDS => "",
  CURLOPT_HTTPHEADER => array(
    "accept: application/json",
    "authorization: Bearer {token}",
    "content-type: multipart/form-data"
  ),
));

$response = curl_exec($curl);
$err = curl_error($curl);

curl_close($curl);

if ($err) {
  echo "cURL Error #:" . $err;
} else {
  echo $response;
}
                        </pre>

                        <h3 class="sub-title">
                            نمونه پاسخ این API:
                        </h3>

                        <pre>
<span style="color: green">// 200 status code</span>
{
    "status": 1,
    "data": {
      "wallet": 26099,
      "blocked_amount": 0,
      "deductible_amount": 26099,
      "currency": "Toman",
      "settlements": {
        "data": [
          {
            "id": "8edaa0a0-a33f-11ea-838d-676dce32760e",
            "iban_id": 22822, <!--TODO: Is it right?-->
            "gateway_transaction_id": 159024236678,
            "amount": 100000,
            "payment_number": null,
            "status": "CANCELED",
            "wallet": 160985,
            "settlement_date": "2020-05-31"
          },
          {
            "id": "807003f0-8398-11ea-a42b-ede62b9de0c1",
            "iban_id": 902,
            "gateway_transaction_id": 158745010355,
            "amount": 50000,
            "payment_number": null,
            "status": "DONE",
            "wallet": 99485,
            "settlement_date": "2020-04-21"
          },
          {
            "id": "010a7850-82ff-11ea-85bd-49ef214903e3",
            "iban_id": 902,
            "gateway_transaction_id": 158738422601,
            "amount": 68000000,
            "payment_number": null,
            "status": "DONE",
            "wallet": 126485,
            "settlement_date": "2020-04-21"
          },
          {
            "id": "53665740-82cf-11ea-baf3-95ebee6a9eca",
            "iban_id": 26,
            "gateway_transaction_id": 158736374134,
            "amount": 15000000,
            "payment_number": null,
            "status": "CANCELED",
            "wallet": 43126485,
            "settlement_date": "2020-04-21"
          },
          {
            "id": "456afdb0-82cf-11ea-8e13-3183b5b1630b",
            "iban_id": 7215,
            "gateway_transaction_id": 158736367341,
            "amount": 5000000,
            "payment_number": null,
            "status": "CANCELED",
            "wallet": 58126485,
            "settlement_date": "2020-04-21"
          }
        ],
        "first": "https:\/\/api.settlement.vandar.io\/v1\/settlements?page=1",
        "last": "https:\/\/api.settlement.vandar.io\/v1\/settlements?page=19",
        "prev": null,
        "next": "https:\/\/api.settlement.vandar.io\/v1\/settlements?page=2",
        "current_page": 1,
        "from": 1,
        "last_page": 19,
        "path": "https:\/\/api.settlement.vandar.io\/v1\/settlements",
        "per_page": 5,
        "to": 5,
        "total": 93
      }
    }
  }
                        </pre>

                        <pre>
<span style="color: orange">// 401 status code</span>
{
  "status": 0,
  "error": "Unauthenticated"
}
                        </pre>

                        <pre>
<span style="color: orange">// 4xx status code</span> <!--TODO: Other possible errors (4xx family).-->
{
  سایر خطاهای ممکن
}
                        </pre>


                        <h3 class="title">
                            <strong><a href="#store">ذخیره</a></strong>
                        </h3>
                        <p>در این بخش شما می‌توانید یک درخواست تسویه را ثبت نمایید.</p>

                        <pre>
<span class="key">METHOD:</span> POST
<span class="key">URL:</span> https://api.vandar.io/v2.1/business/{business}/settlement/store
                        </pre>
                        <!--TODO: Header json sample?-->
                        <p>پارامتر {business} همان نام انگلیسی کسب و کاری است که قصد ثبت تسویه برای آن را دارید.</p>
                        <h3 class="sub-title">
                            پارامترهای ورودی
                        </h3>

                        <table class="table">
                            <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Type</th>
                                <th>Status</th>
                                <th>Description</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>amount</td>
                                <td>integer</td>
                                <td>required</td>
                                <td>مبلغ (تومان)</td>
                            </tr>
                            <tr>
                                <td>iban</td>
                                <td>string</td>
                                <td>required</td>
                                <td>شماره شبا</td>
                            </tr>
                            <tr>
                                <td>payment_number</td>
                                <td>integer</td>
                                <td>optional</td>
                                <td>شناسه واریز</td>
                            </tr>

                            </tbody>
                        </table>

                        <!--TODO: Header json sample?-->

                        <h3 class="sub-title">
                            نمونه کد برای درخواست این API:
                        </h3>
                        <pre><!--TODO: Other programming languages with tab.-->
$curl = curl_init();

curl_setopt_array($curl, array(
  CURLOPT_URL => "https://api.vandar.io/v2.1/business/{business}/settlement/store",
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_ENCODING => "",
  CURLOPT_MAXREDIRS => 10,
  CURLOPT_TIMEOUT => 30,
  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
  CURLOPT_CUSTOMREQUEST => "POST",
  CURLOPT_POSTFIELDS => "{\n\t\"iban\" : \"IR060620000000******024006\",\n\t\"amount\" : 5000\n}",
  CURLOPT_HTTPHEADER => array(
    "accept: application/json",
    "authorization: Bearer {token}",
    "content-type: application/json"
  ),
));

$response = curl_exec($curl);
$err = curl_error($curl);

curl_close($curl);

if ($err) {
  echo "cURL Error #:" . $err;
} else {
  echo $response;
}
                        </pre>


                        <h3 class="sub-title">
                            نمونه json ورودی
                        </h3>
                        <pre>
{
  نمونه json ورودی <!--TODO: Json request example.-->
}
                        </pre>

                        <h3 class="sub-title">
                            نمونه پاسخ این API:
                        </h3>

                        <pre>
<span style="color: green">// 200 status code</span>
{
    "status": 1,
    "data": {
      "settlement": [
        {
          "id": "b6c72d20-a4ba-11ea-8a6c-9dc8b4b708ac",
          "iban_id": "b6b5c440-a4ba-11ea-837b-bf6e427ec6d0",
          "transaction_id": 159100434426,
          "amount": 50000,
          "payment_number": null,
          "status": "PENDING",
          "wallet": 60985,
          "settlement_date": "2020-06-02",
          "settlement_date_jalali": "1399\/03\/13"
        }
      ]
    }
  }
                        </pre>

                        <pre>
<span style="color: orange">// 401 status code</span>
{
  "status": 0,
  "error": "Unauthenticated"
}
                        </pre>

                        <pre>
<span style="color: orange">// 4xx status code</span> <!--TODO: Other possible errors (4xx family).-->
{
  سایر خطاهای ممکن
}
                        </pre>

                        <h3 class="title">
                            <strong><a href="#show">نمایش</a></strong>
                        </h3>
                        <p>در این بخش شما می‌توانید یک درخواست تسویه را نمایش دهید.</p>

                        <pre>
<span class="key">METHOD:</span> GET
<span class="key">URL:</span> https://api.vandar.io/v2.1/business/{business}/settlement/{id}
                        </pre>
                        <p>پارامتر {business} همان نام انگلیسی کسب و کاری است که قصد دارید یک تسویه از آن را نمایش دهید.</p>
                        <p>پارامتر {id} همان id مربوط به تسویه‌ای است که قصد نمایش آن را دارید.</p>

                        <!--TODO: Header json sample?-->

                        <h3 class="sub-title">
                            نمونه کد برای درخواست این API:
                        </h3>
                        <pre> <!--TODO: Different programming languages with tab-->
$curl = curl_init();

curl_setopt_array($curl, array(
  CURLOPT_URL => "https://api.vandar.io/v2.1/business/{business}/settlement/{id}",
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_ENCODING => "",
  CURLOPT_MAXREDIRS => 10,
  CURLOPT_TIMEOUT => 30,
  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
  CURLOPT_CUSTOMREQUEST => "GET",
  CURLOPT_POSTFIELDS => "-----011000010111000001101001\r\nContent-Disposition: form-data; name=\"\"\r\n\r\n",
  CURLOPT_HTTPHEADER => array(
    "accept: application/json",
    "authorization: Bearer {token}",
    "content-type: multipart/form-data"
  ),
));

$response = curl_exec($curl);
$err = curl_error($curl);

curl_close($curl);

if ($err) {
  echo "cURL Error #:" . $err;
} else {
  echo $response;
}
                        </pre>

                        <h3 class="sub-title">
                            نمونه json ورودی
                        </h3>
                        <pre>
{
  نمونه json ورودی <!--TODO: Json request example.-->
}
                        </pre>

                        <h3 class="sub-title">
                            نمونه پاسخ این API:
                        </h3>

                        <pre>
<span style="color: green">// 200 status code</span>
{
    "status": 1,
    "data": {
      "settlement": {
        "id": "8edaa0a0-a33f-11ea-838d-676dce32760e",
        "iban_id": 22822,
        "gateway_transaction_id": 159024236678,
        "amount": 100000,
        "payment_number": null,
        "status": "CANCELED",
        "wallet": 160985,
        "settlement_date": "2020-05-31"
      }
    }
  }
                        </pre>

                        <pre>
<span style="color: orange">// 401 status code</span>
{
  "status": 0,
  "error": "Unauthenticated"
}
                        </pre>

                        <pre>
<span style="color: orange">// 4xx status code</span> <!--TODO: Other possible errors (4xx family).-->
{
  سایر خطاهای ممکن
}
                        </pre>


                        <h3 class="title">
                            <strong><a href="#cancel">لغو</a></strong>
                        </h3>
                        <p>در این بخش شما می‌توانید یک درخواست تسویه را لغو نمایید.</p>

                        <pre>
<span class="key">METHOD:</span> DELETE
<span class="key">URL:</span> https://api.vandar.io/v2.1/business{business}/settlement/{transaction_id}
                        </pre>
                        <p>پارامتر {business} همان نام انگلیسی کسب و کاری است که قصد لغو یک تسویه برای آن را دارید.</p>
                        <p>پارامتر {transaction_id} همان transaction_id مربوط به تسویه‌ای است که قصد لغو آن را دارید.</p> <!--TODO: Right?-->

                        <!--TODO: Header json sample?-->

                        <h3 class="sub-title">
                            نمونه کد برای درخواست این API:
                        </h3>

                        <pre> <!--TODO: Different programming languages with tab-->
$curl = curl_init();

curl_setopt_array($curl, array(
  CURLOPT_URL => "https://api.vandar.io/v2.1/business/{business}/settlement/{transaction_id}",
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_ENCODING => "",
  CURLOPT_MAXREDIRS => 10,
  CURLOPT_TIMEOUT => 30,
  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
  CURLOPT_CUSTOMREQUEST => "DELETE",
  CURLOPT_POSTFIELDS => "",
  CURLOPT_HTTPHEADER => array(
    "accept: application/json",
    "authorization: Bearer {token}",
    "content-type: multipart/form-data"
  ),
));

$response = curl_exec($curl);
$err = curl_error($curl);

curl_close($curl);

if ($err) {
  echo "cURL Error #:" . $err;
} else {
  echo $response;
}
                        </pre>

                        <h3 class="sub-title">
                            نمونه json ورودی
                        </h3>
                        <pre>
{
  نمونه json ورودی <!--TODO: Json request example.-->
}
                        </pre>

                        <pre>
<span style="color: green">// 200 status code</span>
{
  "status": 1,
  "message": "درخواست تسویه شما از دستور پرداخت خارج شد و وجه تسویه به حساب شما برگشت داده شد"
}
                        </pre>

                        <pre>
<span style="color: orange">// 401 status code</span>
{
  "status": 0,
  "error": "Unauthenticated"
}
                        </pre>

                        <pre>
<span style="color: orange">// 4xx status code</span> <!--TODO: Other possible errors (4xx family).-->
{
  سایر خطاهای ممکن
}
                        </pre>

<footer id="footer">
    <div class="container">
        <div class="row" style="text-align: center">
            <div class="col-sm-8 col-xs-6 no-padding-bottom">
                <a href="https://github.com/vandarpay/docs" target="_blank">مخزن گیت‌هاب</a>
            </div>
            <div class="col-sm-4 col-xs-6 text-right no-padding-bottom">2020 &copy; <a href="https://vandar.io" target="_blank">وندار</a></div>
        </div>
    </div>

</footer>
<button onclick="goTop()" id="go_top" title="Go to top">^</button>
<script>
    window.onscroll = function() {
        var top = document.getElementById("go_top");
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            top.style.display = "block";
        } else {
            top.style.display = "none";
        }
    };

    function goTop() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    };
</script>
</body>
</html>
