 <!DOCTYPE html>
<html lang="fa">
<head>
    <title>مستندات وندار | ارایه دهنده راهکارهای پرداخت</title>
    <meta name="description" content="">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <meta name="format-detection" content="telephone=no">
    <link href="https://fonts.googleapis.com/css2?family=Markazi+Text&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.rtl.css">
    <link rel='icon' href='https://cdn.vandar.ir/public/logos/icon-logo.svg' type='image/x-icon' >
</head>
<body dir="rtl">
<header id="header">
    <h1>Vandar</h1>
    <h2>مستندات وندار</h2>
</header>

<div class="container">
    <div class="row">
        <div class="col-sm-3">
            <div id="myHeader">
                <ul>
                    <!--                <li>-->
                    <!--                    <a href="https://vandarpay.github.io/docs/" class="active">مفاهیم اولیه</a>-->
                    <!--                    &lt;!&ndash;                    <div class="sidenav">&ndash;&gt;-->
                    <!--                </li>-->

                    <li>
                        <button class="dropdown-btn">مفاهیم اولیه
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/#postman">Postman</a><br>
                            <a href="https://vandarpay.github.io/docs/#start">شروع کنید</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">درگاه پرداخت
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/ipg/#payment-gateways">ساخت و ویرایش درگاه پرداخت</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#active-ipg">فعال کردن درگاه پرداخت</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#implementation">پیاده سازی فنی درگاه پرداخت</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-1">مرحله اول</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-2">مرحله دوم</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-3">مرحله سوم</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-4">مرحله چهارم</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">دریافت توکن
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/auth/#step-1">مرحله اول</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">کسب‌وکار
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">

                            <a href="https://vandarpay.github.io/docs/business/#information">اطلاعات</a><br>
                            <a href="https://vandarpay.github.io/docs/business/#users">کاربران</a><br>
                            <!--                        </div>-->
                        </div>
                        <!--                        <a href="https://vandarpay.github.io/docs/business">کسب‌وکار</a>-->
                    </li>
                    <li>
                        <button class="dropdown-btn">صورت حساب
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/invoice/#wallet">کیف پول</a><br>
                            <a href="https://vandarpay.github.io/docs/invoice/#transactions">صورت حساب</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">سرویس تسویه
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/settlement/#settlements">لیست تسویه ها</a><br>
                            <a href="https://vandarpay.github.io/docs/settlement/#request-settlement">ثبت درخواست تسویه</a><br>
                            <a href="https://vandarpay.github.io/docs/settlement/#cancel">لغو یک تسویه</a><br>
                            <a href="https://vandarpay.github.io/docs/settlement/#health">لیست روش‌های پرداخت تسویه</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">  سرویس تسویه گروهی
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/batch-settlement/#batch-settlements-intro">مقدمه</a><br>
                            <a href="https://vandarpay.github.io/docs/batch-settlement/#batch-settlements-index">لیست تسویه های گروهی</a><br>
                            <a href="https://vandarpay.github.io/docs/batch-settlement/#batch-settlements-show">جزییات یک تسویه گروهی</a><br>
                            <a href="https://vandarpay.github.io/docs/batch-settlement/#batch-settlement-store">ثبت یک تسویه گروهی</a><br>
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">سرویس پرداخت خودکار
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/subscription/#mpg">مقدمه</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/#banks">دریافت لیست روش‌های پرداخت‌</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/#get-token">سرویس دریافت توکن</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/#withdrawal">سرویس برداشت وجه</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/#error">لیست خطاهای دریافتی</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/better-product-design/" target="_blank">طراحی محصولی بهتر</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">سرویس پرداخت با وندار
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#overview">معرفی سرویس</a><br>
                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#intro">مقدمه</a><br>
                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#send">دریافت توکن</a><br>
                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#redirect">انتقال کاربر</a><br>
                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#inquiry">استعلام</a><br>
                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#verify">تایید</a><br>
                        </div>
                    </li>
                    <li>
                      <button class="dropdown-btn">سرویس مشتریان
                          <br>
                          <i class="fa fa-caret-down"></i>
                      </button>
                      <div class="dropdown-container">
                          <a href="https://vandarpay.github.io/docs/customers/#customers">مقدمه</a><br>
                          <a href="https://vandarpay.github.io/docs/customers/#base">مشتریان</a><br>
                          <a href="https://vandarpay.github.io/docs/customers/#wallet">کیف پول</a><br>
                          <a href="https://vandarpay.github.io/docs/customers/#transactions">تراکنش</a><br>
                          <a href="https://vandarpay.github.io/docs/customers/#sheba">شبا</a><br>
                          <a href="https://vandarpay.github.io/docs/customers/#card">کارت</a><br>
                          <a href="https://vandarpay.github.io/docs/customers/#authentication">احراز هویت</a><br>
                          <a href="https://vandarpay.github.io/docs/customers/#logs">گزارشات</a><br>
                          <a href="https://vandarpay.github.io/docs/customers/#cash-in-code">شناسه پرداخت</a><br>
                      </div>
                  </li>
                    <li>
                        <button class="dropdown-btn">سرویس معاملات امن
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/miando/#intro">مقدمه</a><br>
                            <a href="https://vandarpay.github.io/docs/miando/#customers">مشتریان</a><br>
                            <a href="https://vandarpay.github.io/docs/miando/#agreements">معاملات</a><br>
                            <a href="https://vandarpay.github.io/docs/miando/#tickets">تیکت ها</a><br>
                            <a href="https://vandarpay.github.io/docs/miando/#webhooks">وبهوک</a><br>
                        </div>
                    </li>
					<li>
						<button class="dropdown-btn">ابزار واریز روش‌های پرداختی
							<br>
							<i class="fa fa-caret-down"></i>
						</button>
						<div class="dropdown-container">
							<a href="https://vandarpay.github.io/docs/cash-in/#intro">مقدمه</a><br>
							<a href="https://vandarpay.github.io/docs/cash-in/#ibans-list">لیست شماره شباها</a><br>
							<a href="https://vandarpay.github.io/docs/cash-in/#get-balance">دریافت موجودی حساب</a><br>
							<a href="https://vandarpay.github.io/docs/cash-in/#deposit">درخواست واریز</a><br>
						</div>
					</li>
                    <li>
                        <a href="https://vandarpay.github.io/docs/refund">بازگشت وجه</a>
                    </li>
                    <li>
                        <a href="https://vandarpay.github.io/docs/banks">روش‌های پرداخت‌</a>
                    </li>
                    <li>
                        <a href="https://vandarpay.github.io/docs/errors">خطا‌ها</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-sm-9">
            <article class="content">
                <div class="article" id="ipg">

                    <div>
                        آخرین تغییرات: ۱۴۰۰/۱۰/۱۰
                    </div>

                    <h2 class="article-header">مقدمه</h2>
                    <div>
                        <h3 class="title" id="mpg">
                          <a href="#mpg" > <strong>سرویس پرداخت آزاد چیست:</strong></a>
                        </h3>
                        <!--todo: description-->
                        <p>سرویس پرداخت خودکار یا دایرکت دبیت سرویسی است که یک فرد وجوهی را از حساب روش‌های پرداختی شخص دیگری خارج میکند در واقع شما به روش‌های پرداخت اجازه میدهید که مبلغی را مستقیما   از حسابتان کسر و در قبال آن خدماتی را به شما  ارایه دهد. به طور کلی دایرت دبیت برداشت مستقیم پول برای انجام معاملات مالی در صورت صدور مجوز توسط پرداخت کننده می باشد. این کار بیشتر زمانی انجام می شود که شما بخواهید اشتراک خود را تمدید کنید.

                            شما می توانید در وندار به وسیله این API پرداخت خودکار حساب های خود را مدیریت کنید.
                            تمامی API های وندار بر اساس معماری REST پیاده سازی شده و آدرس آن به شرح زیر می باشد:
                            </p>
                        <p>برای تمامی درخواست های ارسالی باید مقادیر زیر در هدر ارسال شوند:
                            توکن همان کلید API یی است که از وندار دریافت کرده اید.
                            </p>
                        <pre>
<span class="key">Accept:</span> application/json
<span class="key">x-api-key:</span> {api-key}
                        </pre>
                        <br>
                        <h2 class="article-header" id="banks">
                            <a href="#banks">دریافت لیست روش‌های پرداخت</a> </h2>
                        <p>لیست روش های پرداخت قابل استفاده از این بخش قابل دسترس می‌باشد.
                            می‌توانید بر اساس نیازمندی کسب‌وکار خود کلیه روش‌های پرداخت فعال را به کاربران ارائه دهید و یا در صورت نیاز یک لیست شخصی‌سازی شده برای کسب‌وکار خود ایجاد کنید و لیست تعیین شده‌ای از روش‌های پرداخت را در اختیار کاربران خود قرار دهید.
                        </p>
                        <h3 class="title" id="custom-payment-methods"><a href="#custom-payment-methods">
                            ۱. لیست شخصی‌سازی شده روش‌های پرداخت
                        </a>
                        </h3>
                        <p>
                            این امکان برای شما وجود دارد که از میان همه روش‌های پرداختی که در حال حاضر قابلیت ارائه سرویس پرداخت دارند، بر اساس نیاز خود، روش‌های پرداختی را فعال یا غیرفعال کنید.
                            بصورت پیش‌فرض کلیه روش‌های پرداخت‌ برای کسب‌وکار شما فعال می‌باشند و با فراخوانی سرویس لیست روش‌های پرداخت‌ می‌توانید اطلاعات روش‌های پرداخت و همچنین وضعیت در دسترس بودن روش‌های پرداخت را دریافت نمایید.
                            در صورتی که بخواهید روش‌های پرداختی خاصی را از لیست روش‌های پرداخت‌ی دریافتی حذف نمایید می‌توانید از طریق داشبورد وندار، بخش پرداخت آزاد، اقدام نمایید.
                        </p>
                        </br>
                        <p>
                            جهت فعال یا غیرفعال‌سازی روش‌های پرداخت‌ می‌توانید از بخش مدیریت اقدام نمایید.
                        </p>


                        <p>
                            جهت فراخوانی سرویسی که لیست روش‌های پرداخت‌ی فعال کسب‌وکار شما را نمایش می‌دهد، آدرس زیر را فراخوانی کنید.
                        </p>
                        <pre>
<span class="key">Method:</span>  GET
<span class="key">Address:</span> https://api.vandar.io/mpg/v1/business-payment-methods
                        </pre>
                        </br>
                        <h3 class="sub-title">
                            پارامترهای مجاز
                        </h3>
                        <table class="table">
                            <thead>
                            <tr>
                                <th>name</th>
                                <th>Type</th>
                                <th>Status</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>mobile</td>
                                <td>string</td>
                                <td>optional</td>
                            </tr>
                            <tr>
                                <td>modes</td>
                                <td>array</td>
                                <td>optional</td>
                            </tr>
                            <tr>
                                <td>types</td>
                                <td>array</td>
                                <td>optional</td>
                            </tr>
                            <tr>
                                <td>limit</td>
                                <td>numeric</td>
                                <td>optional</td>
                            </tr>
                            <tr>
                                <td>is_healthy</td>
                                <td>boolean</td>
                                <td>optional</td>
                            </tr>

                            </tbody>
                        </table>
                        <h3 class="sub-title">
                            توضیحات
                        </h3>
                        <ul>
                            <li>
                                mobile (اختیاری): شماره موبایل کاربر. شماره موبایل بدون کد کشور و به فرمت 09123456789 باشد.
                            </li>
                            <div class="info">
                                <strong>نکته! </strong>
                                <span>
                                    اگر موبایل  در درخواست مربوطه ارسال گردد، و روش پرداخت از نوع debit باشد، لیست مجوزهای فعال مربوط به آن شماره موبایل نیز در پاسخ دریافتی قرارخواهد گرفت.(در نمونه پاسخ دریافتی میتوانید مشاهده کنید.)
                                </span>
                            </div>
                            <br>
                            <li>modes (اختیاری): این کلید به مدل پرداخت مربوط است. هر مقداری وارد شود، بر اساس مقدار وارد شده لیست روش های پرداخت فیلتر می‌شود.</li>
                            <div class="info">
                                <strong>نکته! </strong>
                                <span>
                                    در حال حاضر این سرویس دو مدل پرداخت را پشتیبانی میکند:
                                </span>
                                <ul>
                                    <li>
                                         once : جهت پرداخت یک باره
                                    </li>
                                </ul>
                            </div>
                            <br>
                            <li>types (اختیاری): این کلید به نوع روش پرداخت مربوط است. هر مقداری وارد شود، بر اساس مقدار وارد شده لیست روش های پرداخت فیلتر می‌شود.</li>
                            <div class="info">
                                <strong>نکته! </strong>
                                <span>
                                    در حال حاضر این سرویس یک مدل پرداخت را پشتیبانی میکند:
                                </span>
                                <ul>
                                    <li>
                                        debit : پرداخت از حساب
                                    </li>
                                </ul>
                            </div>
                            <br>
                            <li>limit (اختیاری): هر روش پرداختی محدودیت سقف برداشت دارد. درصورت وارد کردن این کلید، روش‌های پرداخت بر اساس حداقل مقدار وارد شده فیلتر می‌شود.</li>
                            <li>is_healthy (اختیاری): هر روش پرداختی بنابر دلایل مختلف ممکن است به صورت موقت آماده به ارائه خدمات نباشد. درصورت وارد کردن این کلید  ، روش‌های پرداخت بر اساس  مقدار وارد شده فیلتر می‌شود.</li>
                        </ul>
                        <h3 class="sub-title">
                            نمونه json
                        </h3>
                        <pre>
{
    "mobile": "09354614194",
    "modes": [
        "once"
    ],
    "types": [
        "debit"
    ],
    "limit": 3000000,
    "is_healthy": true
}
                        </pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق:
                        </h3>

                        <pre>
<span class="key">HTTP/1.1</span> 200
{
    "message": "لیست متد های پرداخت."
    "data": [
        {
            "modes": [
                {
                    "slug": "once"
                }
            ],
            "slug": "debit-saman",
            "type": "debit",
            "name": "بانک سامان",
            "logo": "https://cdn.vandar.io/mpg/payment_methods/debit-saman.svg",
            "is_healthy": true,
            "limit": 4270045,
            "debit": {
                "mandates": [
                    {
                        "id": "1408bf10-2dcd-11ed-b084-bb5348c5e321",
                        "count": 30,
                        "limit": 30000000,
                        "payment_method_slug": "debit-saman",
                        "status": "ACTIVE",
                        "expiration_date": "1403/06/15",
                        "customer_id": "efdaf820-2075-11ed-a96b-a9167c05d45d",
                        "created_at": 1662452234,
                        "updated_at": 1662452234,
                        "revoked_at": null
                    }
                ]
            }
        }
    ]
}
                        </pre>

                        </pre>
                        <br>
                        <h2 class="article-header" id="get-token">
                        <a href="#get-token">صدور مجوز در روش پرداخت از حساب</a> </h2>

                        <h3 class="title" id="subscription"><a href="#subscription">
                            ۱. درخواست بستن مجوز:
                        </a>

                        </h3>
                        <p>اولین مرحله برای بستن مجوز برداشت از حساب، ثبت درخواست صدور مجوز است. لازم است که درخواست خود را به آدرس زیر ارسال کنید.</p>
                        <pre>
<span class="key">Method:</span> POST
<span class="key">Address:</span> https://api.vandar.io/mpg/v1/mandates
                        </pre>
                        <h3 class="sub-title">
                          پارامترهای مجاز
                        </h3>
                        <table class="table">
                          <thead>
                          <tr>
                              <th>name</th>
                              <th>Type</th>
                              <th>Status</th>
                          </tr>
                          </thead>
                          <tbody>
                          <tr>
                              <td>payment_method</td>
                              <td>string</td>
                              <td>required</td>
                          </tr>
                          <tr>
                              <td>count</td>
                              <td>integer</td>
                              <td>required</td>
                          </tr>
                          <tr>
                              <td>limit</td>
                              <td>integer</td>
                              <td>required</td>
                          </tr>
                          <tr>
                              <td>expiration_date</td>
                              <td>date</td>
                              <td>required</td>
                          </tr>
                          <tr>
                              <td>callback_url</td>
                              <td>string</td>
                              <td>required</td>
                          </tr>
                          <tr>
                              <td>customer.mobile</td>
                              <td>string</td>
                              <td>required</td>
                          </tr>
                          <tr>
                            <td>customer.email</td>
                            <td>string</td>
                            <td>optional</td>
                          </tr>
                          <tr>
                              <td>customer.first_name</td>
                              <td>string</td>
                              <td>optional</td>
                          </tr>
                          <tr>
                              <td>customer.last_name</td>
                              <td>string</td>
                              <td>optional</td>
                          </tr>
                        </tbody>
                      </table>
                      <h3 class="sub-title">
                        توضیحات
                      </h3>
                        <ul>
                          <li>payment_method: (اجباری) slug روش‌ پرداخت که از لیست روش های پرداخت قابل استفاده است.</li>
                          <li>count (اجباری): حداکثر تعداد دفعاتی که در یک ماه می‌توان با این مجوز، برداشت وجه موفق انجام داد.</li>
                          <li>limit (اجباری): حداکثر مبلغ وجه قابل برداشت در هر درخواست مربوط به این مجوز. واحد پول ریال است.</li>
                          <li>expiration_date: (اجباری) تاریخ انقضای مجوز. این تاریخ باید بزرگتر از تاریخ روز جاری باشد و به صورت میلادی وارد می‌شود.</li>
                          <li>callback_url (اجباری): باید با آدرس درگاه پرداخت تایید شده در وندار بر روی یک دامنه باشد</li>
                          <li>customer.mobile (اجباری): شماره موبایل کاربر. شماره موبایل بدون کد کشور و به فرمت 09123456789 باشد.</li>
                          <li>customer.email (اختیاری): ایمیل کاربر که بهتر است برای پیگیری‌های بعدی ارسال شود.</li>
                          <li>customer.first_name (اختیاری): نام کاربر که بهتر است برای پیگیری‌های بعدی ارسال شود</li>
                          <li>customer.last_name (اختیاری): نام‌خانوادگی کاربر که بهتر است برای پیگیری‌های بعدی ارسال شود</li>
                        </ul>
                        <h3 class="sub-title">
                          نمونه json
                        </h3>
                        <pre>
{
  "payment_method": "debit-saman",
  "count": 7,
  "limit": 10000,
  "expiration_date": "2023-03-03",
  "callback_url": "https://paperpiano.ir/mandate/callback",
  "customer": {
    "mobile": "09123456789",
    "email": "yourcustomer@gmail.com",
    "first_name": "محمد",
    "last_name": "مقصودی",
  }
}
                        </pre>
                        <h3 class="sub-title">
                          نمونه پاسخ دریافتی موفق:
                        </h3>

                        <pre>
<span class="key">HTTP/1.1</span> 200
{
  "status": 1,
  "message": "درخواست توکن با موفقیت ثبت شد.",
  "data": {
      "token": "0cf235d0-d48b-11ea-86cd-298ec898a9bd",
        "customer": {
            "mobile": "09123456789",
            "first_name": "محمد",
            "last_name": "مقصودی",
            "email": "yourcustomer@gmail.com",
      }
    }
  }
}
                        </pre>
                        <div class="info">
                          <strong>نکته! </strong>
                          token دریافتی در این قسمت یکبار مصرف است و پس از ۲۰ دقیقه باطل می شود.
                        </div>
                        <ul>
                          <li>message: پیغام درخواست توکن با موفقیت ثبت شد.</li>
                          <li>
                            data:
                            <ul>
                              <li>token: آیدی شما در سرویس پرداخت خودکار که باید درخواست های بعدی خود را با این آیدی ارسال کنید.</li>
                            </ul>
                            <ul>
                              <li>
                                  customer:
                                  <ul>
                                      <li>mobile: شماره موبایل کاربر</li>
                                      <li>first_name: نام کاربر</li>
                                      <li>last_name: نام‌خانوادگی کاربر</li>
                                      <li>email: ایمیل کاربر</li>
                                  </ul>
                              </li>
                            </ul>
                          </li>
                        </ul>
                      <h3 class="title" id="transfer">
                       <a href="#transfer"> ۲. انتقال کاربر به صفحه تایید صدور مجوز</a>
                      </h3>
                      <p>
                        در مرحله بعد token دریافتی از قسمت قبل را در انتهای
                         آدرس
                        می گذارید و در مرورگر وارد سایت می شوید.
                      </p>
                      <pre>
<span class="key">METHOD:</span> get
<span class="key">URL:</span> https://mpg.vandar.io/mandates/{token}
                      </pre>

                        <p>
                            در صورتی که در ارتباط با روش‌های پرداخت اختلال پیش آمده باشد شما با آدرس زیر روبرو می‌شوید:
                        </p>
<pre>
https://yourdomain.com/callback?token=0cf235d0-d48b-11ea-86cd-298ec898a9bd&status=FAILED_TO_ACCESS_BANK
</pre>
                        <ul>
                            <li>
                                token: توکنی که با استفاده از آن تلاش کرده‌اید تا به صفحه‌ی روش‌های پرداخت منتقل شوید.
                            </li>
                        </ul>
                        <p>
                            در صورتی که با موفقیت به صفحه‌ی روش‌های پرداخت وارد شوید، با صفحه‌ای مشابه با صفحه‌ی زیر مواجه خواهید شد:
							در این مرحله اطلاعات حسابی که کاربر می خواهد بر روی آن دسترسی بدهد باید وارد شود. شماره موبایلی که در این قسمت ارسال می شود باید متعلق به صاحب حساب باشد.


                        </p>
<!-- todo renew images -->
<img src="../images/authorize-intro.png" alt="صفحه ورود روش‌های پرداخت">
<p>با وارد کردن کد ملی و گذر واژه صحیح وارد صفحه زیر می شوید.</p>
<img src="../images/authorize.png" alt="صفحه دسترسی">
<h3 class="title" id="subscription-code">
  <a href="#subscription-code">۳. دریافت کد اشتراک</a>
</h3>
<p>در صورتی که کاربر بر روی دکمه دسترسی دارد کلیک کند، وندار کاربر را به آدرس برگشتی که در مرحله اول ارسال کرده‌اید به همراه پارامتر token و status و mandate_id هدایت می‌کند.

</p>

<p>در صورت اجازه‌ی دسترسی به حساب در صفحه‌ی روش‌های پرداخت</p>
<pre>
https://yourdomain.com/callback?token=0cf235d0-d48b-11ea-86cd-298ec898a9bd&authorization_id=9f307e30-dc77-11ea-830e-7533ca1787c5&status=SUCCEED
</pre>

<p>در صورت عدم اجازه‌ی دسترسی به حساب در صفحه‌ی روش‌های پرداخت</p>
<pre>
https://yourdomain.com/callback?token=0cf235d0-d48b-11ea-86cd-298ec898a9bd&status=FAILED&error_code=21
</pre>

        <ul>
                <li>
                    token: توکنی که با استفاده از آن تلاش کرده‌اید تا به صفحه‌ی روش‌های پرداخت منتقل شوید.
                </li>
                <li>
                    error_code: کد خطایی که به دلیل آن این درخواست ناموفق بوده است که می توانید با استفاده از جدول زیر توضیحات هر کد را ببینید.
                </li>
        </ul>

              <table class="table" style="direction: ltr;" id="tempAuthorization_errors_table">
                                    <thead>
                                    <tr>
                                        <th style="text-align: center;">error_code</th>
                                        <th style="text-align: center;">error_message</th>
                                    </tr>
                                    </thead>
                                </table>

              <h3 class="title" id="subscription-verify"><a href="#subscription-verify">
                ۴. تایید اشتراک
            </a>

            </h3>
            <div class="info">
                چنانچه کسب‌وکار شما از <strong>نسخه ۲</strong> APIهای وندار بهره می‌برد، تا ۱ اسفند ۱۴۰۰ نیازی به پیاده‌سازی این قدم نخواهید داشت.
            </div>
            <p>درصورتی که کاربر اجازه دسترسی به مجوز را صادر کرده باشد، باید مجوز ایجاد شده را از طریق ارسال authorization_id به وندار تایید کنید. برای جلوگیری از تغییر وضعیت مجوزهای پیشین، وندار تنها یک بار اجازه تایید مجوز را به API می‌دهد.</p>
            <pre>
<span class="key">Method:</span> PATCH
<span class="key">Address:</span> https://api.vandar.io/v3/business/{business}/subscription/authorization/{authorization}/verify</pre>
          </pre>
          <div class="info">
            <strong>نکته! </strong>
             وندار به جهت جلوگیری از ایجاد مجوز رهاشده، مجوزهایی که پس از ۲۰ دقیقه تایید نشوند را به شکل خودکار لغو می‌کند.
          </div>
            <h3 class="sub-title">
              نمونه پاسخ دریافتی موفق:
            </h3>

            <pre>
<span class="key">HTTP/1.1</span> 200
{
    'status' => 1,
    'message' => 'مجوز با موفقیت تایید شد.'

}
            </pre>
          <h3 class="sub-title">
            نمونه پاسخ دریافتی نا موفق:
          </h3>
          <pre>
<span class="key">HTTP/1.1</span> 422
{
    'status' => 0,
    'message': 'مجوز پیش از این تایید شده است.'
}
            </pre>
<h3 class="title" id="subscriptions">
 <a href="#subscriptions"> ۵. لیست مجوزها</a>
</h3>
<p>در این بخش  شما می توانید لیست مجوزهای ایجاد شده را مشاهده کنید.</p>
<pre>
<span class="key">METHOD:</span> GET
<span class="key">URL:</span> https://api.vandar.io/mpg/v1/mandates
</pre>

<h3 class="sub-title">
    پارامترهای مجاز
</h3>

<table class="table" dir="rtl">
    <thead>
    <tr>
        <th>name</th>
        <th>Type</th>
        <th>Status</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>page</td>
        <td>numeric</td>
        <td>optional</td>
    </tr>
    <tr>
        <td>per_page</td>
        <td>numeric</td>
        <td>optional</td>
    </tr>
    </tbody>
</table>
                        </h3>
                        <ul>
                            <li>
                                page (اختیاری): شماره صفحه.
                            </li>
                            <li>per_page (اختیاری): تعداد آیتم در هر صفحه.</li>
                        </ul>
                        <h3 class="sub-title">
                            نمونه json
                        </h3>
                        <pre>
{
    "page": 1,
    "per_page":12
}
 </pre>
<h3 class="sub-title">
  نمونه پاسخ دریافتی موفق:
</h3>
<pre>
<span class="key">HTTP/1.1</span> 200
{
    "message": "لیست مجوزهای کسب و کار",
    "data": [
        {
            "id": "068bb9f0-5ddf-11ed-b16d-61da2281b3d4",
            "count": 15,
            "limit": 100000,
            "payment_method_slug": "debit-ayandeh",
            "status": "REVOKED",
            "expiration_date": "1401/08/18",
            "customer_id": "9da2e7f0-9de1-11ec-a6bc-978fb3b88c9d",
            "created_at": 1667741198,
            "updated_at": 1667741493,
            "revoked_at": 1667741493
        },
        {
            "id": "7bebd4b0-5a7a-11ed-a48b-d349deb0a60a",
            "count": 5,
            "limit": 50000,
            "payment_method_slug": "debit-saman",
            "status": "ACTIVE",
            "expiration_date": "1402/07/17",
            "customer_id": "4c12b5c0-1323-11ed-88aa-1d355b7661f1",
            "created_at": 1667368162,
            "updated_at": 1667368266,
            "revoked_at": null
        },
    ],
    "meta": {
        "current_page": 1,
        "from": 1,
        "last_page": 1,
        "per_page": 12,
        "to": 2,
        "total": 2
    }
}
</pre>
<ul>
  <li>
    data:
    <ul>
      <li>id: شناسه مجوز که برای درخواست برداشت وجه از این شناسه استفاده می شود.</li>
      <li>count: رشته عددی مشخص کننده تعداد درخواست های برداشت وجه که به صورت ماهانه مشخص می‌شود.</li>
      <li>limit: رشته عددی مشخص کننده حداکثر مبلغ برداشت وجه در هر برداشت. واحد پول ریال است.</li>
      <li>payment_method_slug: کد روش‌ پرداخت که به لیست آن در بالا اشاره شده است.</li>
      <li>status: وضعیت مجوز.</li>
      <li>expiration_date: تاریخ انقضای مجوز.</li>
      <li>customer_id: شناسه مشتری مربوط به این مجوز.</li>
      <li>created_at: تاریخ ایجاد مجوز.</li>
      <li>updated_at: تاریخ آخرین بروزرسانی مجوز</li>
      <li>revoked_at: تاریخ لغو مجوز.</li>
    </ul>
  </li>
  <li>
    meta:
    <ul>
      <li>current_page: آدرس همین صفحه</li>
      <li>from: شماره اولین آیتم که در این صفحه آمده است </li>
      <li>last_page: تعداد کل صفحات</li>
      <li>per_page: تعداد آیتم در هر صفحه</li>
      <li>to: شماره آخرین آیتمی که در این صفحه آمده است</li>
      <li>total: تعداد کل آیتم ها</li>
    </ul>
  </li>
</ul>
<div class="info">
  <strong>نکته! </strong>
     در این قسمت در خروجی id را دریافت میکنیم که در مراحل بعد برای استفاده از متد show و revoke و verify که برای نمایش و پاک کردن و تایید مجوز است مورد استفاده قرار میگیرد.
</div>
<h3 class="sub-title">
  نمونه پاسخ دریافتی نا موفق:
</h3>
<pre>
<span class="key">HTTP/1.1</span> 401
{
    "message": "احراز هویت انجام نشده است",
    "code": "unauthenticated_error"
}
  </pre>
  <ul>
    <li>message: پیغام خطا</li>
    <li>code: کد خطا</li>
  </ul>
<h3 class="title" id="show">
<a href="#show">  ۶. نمایش یک مجوز با id </a>
</h3>
<p>شما می توانید با این دستور جزییات یک مجوز را با فرستادن id دریافت کنید.</p>
<pre>
<span class="key">Method:</span> GET
<span class="key">Address:</span> https://api.vandar.io/mpg/v1/mandates/{id}
</pre>
<p>پارامتر {id} همان شناسه مجوز مربوطه است.</p>
<h3 class="sub-title">
  نمونه پاسخ دریافتی موفق:
</h3>
<pre>
<span class="key">HTTP/1.1</span> 200
{
    "message": "مجوز کسب و کار",
    "data": {
        "mandate": {
            "id": "068bb9f0-5ddf-11ed-b16d-61da2281b3d4",
            "count": 15,
            "limit": 100000,
            "payment_method_slug": "debit-ayandeh",
            "status": "REVOKED",
            "expiration_date": "1401/08/18",
            "customer_id": "9da2e7f0-9de1-11ec-a6bc-978fb3b88c9d",
            "created_at": 1667741198,
            "updated_at": 1667741493,
            "revoked_at": 1667741493
        }
    }
}
</pre>

<h3 class="title" id="delete">
 <a href="#delete">۷. پاک کردن یک مجوز برداشت از حساب با استفاده از id</a>
</h3>

<pre>
<span class="key">Method:</span> DELETE
<span class="key">Address:</span> https://api.vandar.io/mpg/v1/mandates/{id}
</pre>

<p>پارامتر {id} همان id مربوط به مجوز برداشت از حسابی است که قصد حذف آن را دارید.</p>

<h3 class="sub-title">
  نمونه پاسخ دریافتی موفق:
</h3>
<pre>
<span class="key">HTTP/1.1</span> 200
{
  "status": 1,
  "message": "مجوز کسب و کار با موفقیت لغو شد.",
  "data": {
    "mandate": {
      "id": "58ffbb2d-2a64-336d-b7c5-d5982eabf658",
      "count": 2,
      "limit": 800000,
      "payment_method_slug": debit-saman,
      "status": "REVOKED",
      "expiration_date": "1401/11/20",
      "customer_id": "f02ba3c5-6235-3601-981e-87094ac2365c",
      "created_at": 1664719213,
      "updated_at": 1672495213,
      "revoked_at": 1672495213,
    }
  }
}
</pre>
<ul>
  <li>message: پیغام مجوز کسب و کار با موفقیت لغو شد.</li>
  <li>
    data:
    <ul>
      <li>mandate:
        <ul>
          <li>id: آیدی مجوز حذف شده </li>
          <li>count: حداکثر تعداد دفعاتی که در یک ماه می‌ شد با مجوز حذف شده برداشت انجام شود.</li>
          <li>limit: حداکثر مبلغ وجه قابل برداشت با مجوز حذف شده.</li>
          <li>payment_method_slug: slug روش‌ پرداخت </li>
          <li>status: وضعیت مجوز</li>
          <li>expiration_date:  تاریخ انقضای مجوز</li>
          <li>callback_url: آدرس بازگشتی درگاه پرداخت تایید شده در وندار</li>
          <li>customer_id: آیدی کاربری که مجوز برای او صادر شده بود.</li>
          <li>created_at: تاریخ ایجاد به صورت timestamp</li>
          <li>updated_at: تاریخ آخرین بروزرسانی به صورت timestamp</li>
          <li>revoked_at: تاریخ حذف به صورت timestamp</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<div class="info">
  <strong> نکته! </strong>
  بعد از لغو یک مجوز این مجوز از خروجی لیست مجوزها حذف شده و اگر درخواست نمایش مجوز با آیدی را صدا بزنید خطای ۴۲۲ با متن مجوز باطل شده است را دریافت می کنید.
</div>

<br>

<h2 class="article-header" id="checkout"> <a href="#checkout"> سرویس صورتحساب  (Checkout)</a></h2>

<p>این سرویس هنگامی به کار می‌رود که شما قصد دارید یک صورتحساب با روش پرداخت مشخص برای مشتری خود ایجاد کرده و مشتری نسبت به پرداخت آن اقدام نماید.</p>

<h3 class="title">
  ۱. ثبت صورتحساب
</h3>

<pre>
<span class="key">Method:</span> POST
<span class="key">Address:</span> https://api.vandar.io/mpg/v1/checkouts
</pre>

<h3 class="sub-title">
  پارامترهای مجاز
</h3>

<table class="table" dir="rtl">
  <thead>
  <tr>
      <th>name</th>
      <th>Type</th>
      <th>Status</th>
  </tr>
  </thead>
  <tbody>
  <tr>
      <td>payment_method</td>
      <td>string</td>
      <td>required</td>
  </tr>
  <tr>
      <td>amount</td>
      <td>numeric</td>
      <td>required</td>
  </tr>
  <tr>
    <td>request_id</td>
    <td>string</td>
    <td>optional</td>
  </tr>
  <tr>
      <td>checkout_number</td>
      <td>string</td>
      <td>optional</td>
  </tr>
  <tr>
      <td>description</td>
      <td>string</td>
      <td>optional</td>
  </tr>
  <tr>
      <td>type</td>
      <td>string</td>
      <td>optional</td>
  </tr>
  <tr>
      <td>debit</td>
      <td>object</td>
      <td>required if type = debit</td>
  </tr>
  <tr>
      <td>debit.mandate_id</td>
      <td>string</td>
      <td>required if type = debit</td>
  </tr>
  </tbody>
</table>

<h3 class="sub-title">
  توضیحات
</h3>

<ul>
  <li>payment_method (اجباری):
    روش پرداختی
  </li>
  <li>amount (اجباری):
    مبلغ صورتحساب
  </li>
  <li>request_id (اختیاری):
      برای جلوگیری از تکراری بودن درخواست(یکتا برای هر درخواست).
  </li>
    <li>checkout_number (اختیاری):
        شماره فاکتور
    </li>
    <li>
        description (اختیاری): توضیحات اختیاری
    </li>
    <li>
        type (اجباری):  نوع روش پرداختی که در حال حاضر مقدار debit پشتیبانی می شود.
    </li>
    <li>
        debit.mandate_id (اجباری در صورتی که مقدار type برابر debit باشد): شناسه مجوز
    </li>
</ul>

<h3 class="sub-title">
  نمونه json
</h3>

<pre>
{
    "payment_method": "debit-ayandeh",
    "amount": 1000,
    "request_id": 123,
    "checkout_number": "123",
    "description": "test",
    "type": "debit",
    "debit": {
        "mandate_id": "2de1307d-26e2-4de7-81c0-610c86a404cd"
    }
}
</pre>

<h3 class="sub-title">
  نمونه پاسخ دریافتی موفق:
</h3>

<pre>
<span class="key">HTTP/1.1</span> 200
{
  "status": 1,
  "message": "درخواست برداشت وجه با موفقیت ثبت شد.",
  "result": {
    "withdrawal": {
      "id": "8c6e27c0-dbbd-11ea-a2f6-e9c8bf97463f",
      "authorization_id": "9f307e30-dc77-11ea-830e-7533ca1787c5",
      "retry_count": 1,
      "max_retry_count": 1,
      "gateway_transaction_id": "159714176734",
      "amount": "10000",
      "wage_amount": 200,
      "payment_number": null,
      "track_id": null,
      "status": "PENDING",
      "description": null,
      "withdrawal_date": "1399\/05\/21",
      "notify_url": "http://yourdomain.com/notify/me",
      "is_instant": true,
      "error_code": null,
      "error_message": null
    }
  }
}
</pre>

<ul>
    <li>
        status (منسوخ شده): ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
        <br>
        1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
        <br>
        0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
    </li>
  <li>message: پیغام درخواست برداشت وجه با موفقیت ثبت شد</li>
    <li>
        result:
        <ul>
            <li>withdrawal:
                <ul>
                    <li>id: آیدی درخواست برداشت وجه</li>
                    <li>authorization_id: آیدی اشتراکی که درخواست برداشت وجه برای آن صادر شده است</li>
                    <li>retry_count: تعداد دفعات تلاش برای برداشت وجه</li>
                    <li>gateway_transaction_id: شناسه یکتای برداشت وجه</li>
                    <li>amount: مبلغ برداشت وجه</li>
                    <li>wage_amount: کارمزد</li>
                    <li>payment_number: شناسه روش‌های پرداختی برداشت وجه</li>
                    <li>track_id: شناسه پیگیری</li>
                    <li>status: وضعیت برداشت وجه که ۶ حالت PENDING, INIT, DONE, CANCELED, REFUND, FAILED دارد. وضعیت PENDING
                        نشان‌دهنده‌ی این است که تراکنش در حالت انتظار است. INIT نشان‌دهنده‌ی این است که تراکنش به سمت
                        روش‌های پرداخت
                        فرستاده شده است. DONE نشان‌دهنده‌ی وضعیت موفقیت‌آمیز تراکنش است. FAILED تراکنش ناموفق را نشان
                        می‌دهد.
                        CANCELED تراکنشی را نشان می‌دهد که لغو شده است
                        و REFUND به این معنی است که مبلغ تراکنش به کاربر بازگشت خورده است.
                        لازم به ذکر است که امکان لغو تراکنش صرفاً برای
                        تراکنش‌هایی امکان‌پذیر است که به صورت آنی انجام نشده باشند (is_instant: false).
                    </li>
                    <li>description: توضیحات</li>
                    <li>withdrawal_date: تاریخ درخواست برداشت وجه ارسالی توسط شما</li>
                    <li>notify_url: آدرس وبهوکی که می‌توانید ارسال کنید تا از وضعیت نهایی این برداشت وجه مطلع شوید که طول آن نباید بیشتر از ۲۰۴۸ کاراکتر باشد. لازم
                        به
                        ذکر
                        است که متد POST برای ارسال به این آدرس در نظر گرفته شده است و فیلدهای withdrawal_id,
                        authorization_id,
                        gateway_transaction_id, status, amount و payment_number برای شما ارسال می‌شود. در شرایطی که شما
                        در
                        حال
                        تست هستید می‌توانید از وبسایت <a target="_blank" href="https://webhook.site">webhook.site</a>
                        استفاده
                        کنید.
                    </li>
                    <li>is_instant: نشان دهنده این است که برداشت وجه به صورت آنی انجام شده است یا خیر.</li>
                    <li>max_retry_count:
                        حداکثر تعداد دفعاتی که می‌خواهید برای این برداشت وجه تلاش شود. حداقل ۱ و حداکثر ۱۶ مرتبه می‌توان
                        برای
                        یک
                        برداشت وجه تلاش کرد. دقت داشته باشید که در صورت عدم ارسال این پارامتر، مقدار آن برابر با ۱ در
                        نظر
                        گرفته
                        می‌شود.
                        همچنین در نظر داشته باشید این پارامتر برای برداشت وجه‌های آنی (is_instant: 1) برابر با ۱ در نظر
                        گرفته
                        می‌شود (و برداشت وجه آنی بلافاصله پس از استعلام (نمایش برداشت وجه - withdrawal show)، تعیین
                        وضعیت
                        می‌شود
                        که حالت FAILED است یا DONE). در صورتی که برداشت وجه به صورت آنی نباشد (is_instant: 0) اگر برداشت
                        وجه
                        موفقیت‌آمیز باشد (status: DONE) که دیگر تلاشی صورت نمی‌گیرد، اما اگر برداشت وجه به هر دلیل
                        موفقیت‌آمیز
                        نباشد، تا زمانی که برداشت وجه موفقیت‌آمیز شود و یا مقدار retry_count به تعداد max_retry_count
                        برسد
                        سعی
                        به برداشت وجه صورت می‌گیرد. لازم به ذکر است که تا زمانی که برداشت وجه موفقیت‌آمیز نباشد وضعیت آن
                        برداشت
                        وجه به حالت PENDING است و فقط زمانی که مقدار retry_count به max_retry_count (ارسالی از شما) برسد
                        و
                        هنوز
                        برداشت وجه موفقیت‌آمیز نبوده باشد دیگر تلاشی برای برداشت وجه صورت نمی‌گیرد و وضعیت آن برداشت وجه
                        از
                        حالت
                        PENDING به حالت FAILED تبدیل می‌شود.
                    </li>
                    <li>error_code: در زمان ثبت برداشت null می باشد (بعد از استعلام برداشت وجه در صورت وجود خطا کد خطا
                        برگردانده میشود)
                    </li>
                    <li>error_message: در زمان ثبت برداشت null می باشد (بعد از استعلام برداشت وجه در صورت وجود خطا متن خطا
                        برگردانده میشود)
                    </li>


                </ul>
            </li>
        </ul>
    </li>
</ul>
<div class="info">
  <strong>نکته! </strong>
  <a href="https://vandarpay.github.io/docs/subscription/#error">لیست تمامی خطا ها در پایین صفحه قرار گرفته است.</a>
</div>

<h3 class="sub-title">
  نمونه پاسخ دریافتی ناموفق:
</h3>
<p>
  اگر بیشتر از تعداد count این درخواست را صدا بزنید با خطای زیر مواجه می شوید.
</p>

<pre>
<span class="key">HTTP/1.1</span> 422
{
  "status": 0,
  "errors": {
    "authorization_id": ["ذخیره برداشت وجه به دلیل رسیدن به حداکثر تعداد برداشت در ماه، امکان پذیر نیست."]
  }
}
</pre>
<ul>
    <li>
        status (منسوخ شده): ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
        <br>
        1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
        <br>
        0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
    </li>
  <li>
    errors:
    <ul>
      <li>authorization_id: متن خطا</li>
    </ul>
  </li>
</ul>

<p>در صورتی که روش‌های پرداخت مربوطه در دسترس نباشد با خطای زیر مواجه می شوید: </p>
<pre>
<span class="key">HTTP/1.1</span> 409
{
  "status": 0,
  "message": "درحال حاضر امکان ثبت درخواست برداشت وجه در روش‌های پرداخت مورد نظر وجود ندارد."
}
</pre>

<ul>
    <li>
        status (منسوخ شده): ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛
        درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن
        منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به
        شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا
        خیر. به طور خلاصه:
        <br>
        1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
        <br>
        0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
    </li>
    <li>message: متن خطا</li>
</ul>


<p>در صورتی که توکن فرستاده شده معتبر نباشد پاسخ زیر را دریافت می کنید:</p>
<pre>
<span class="key">HTTP/1.1</span> 401
{
  "status": 0,
  "error": "Unauthenticated"
}
</pre>

<ul>
    <li>
        status (منسوخ شده): ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛
        درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن
        منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به
        شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا
        خیر. به طور خلاصه:
        <br>
        1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
        <br>
        0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
    </li>
    <li>errors: آرایه ای از خطا‌ها</li>
</ul>

<p>در صورت عدم وجود کسب و کار این خطا را دریافت می کنید: </p>
<pre>
<span class="key">HTTP/1.1</span> 404
{
  "status": 0,
  "error": "کسب و کار وجود ندارد"
}
</pre>

<ul>
    <li>
        status (منسوخ شده): ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛
        درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن
        منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به
        شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا
        خیر. به طور خلاصه:
        <br>
        1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
        <br>
        0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
    </li>
    <li>message: آرایه ای از خطا‌ها</li>
</ul>



<p>در صورت ارسال شناسه پیگیری تکراری این خطا را دریافت می کنید: </p>
                        <pre>
<span class="key">HTTP/1.1</span> 422
{
	"message": "The given data was invalid.",
	"errors": {
		"track_id": [
			"یک دستور برداشت با این شناسه قبلا ثبت شد است."
		]
	}
}
</pre>




<h3 class="title" id="list-of-registered-funds"><a href="#list-of-registered-funds"> ۲. لیست
                            برداشت وجه های ثبت شده
</a>
</h3>
<p>با استفاده از api زیر می توانید تمام برداشت های وجه انجام شده تا کنون را مشاهده کنید. </p>
                        <pre>
<span class="key">Method:</span> GET
<span class="key">Address:</span> https://api.vandar.io/v3/business/{business}/subscription/withdrawal
</pre>
                        <p>پارامتر {business} همان نام انگلیسی کسب و کاری است که قصد نمایش لیست برداشت وجه از اشتراک آن
                            را دارید.</p>

                        <h3 class="sub-title">
                            لیست برداشت وجه های یک اشتراک
                        </h3>

                        <p>
                            برای مشاهده لیست برداشت وجه‌های ثبت شده از یک اشتراک از آدرس زیر استفاده نمایید.</p>

                        <pre>
<span class="key">Method:</span> GET
<span class="key">Address:</span> https://api.vandar.io/v3/business/{business}/subscription/withdrawal?q={authorization_id}
</pre>

                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق:
                        </h3>

                        <pre>
<span class="key">HTTP/1.1</span> 200

{
  "data": [
    {
      "id": "f3d084e0-b603-11ea-94ad-ebc7f5bf8e12",
      "authorization_id": "9f307e30-dc77-11ea-830e-7533ca1787c5",
      "retry_count": 1,
      "max_retry_count": 1,
      "gateway_transaction_id": 159281892196,
      "amount": 10000,
      "wage_amount": "200.00",
      "payment_number": null,
      "track_id": "d2c5bf5a-280f-4ee5-8888-3d220b63bcc0",
      "status": "DONE",
      "description": null,
      "withdrawal_date": "1399\/04\/04",
      "notify_url": "http://yourdomain.com/notify/me",
      "is_instant": true,
      "error_code": null,
      "error_message": null
    },
    {
      "id": "88a2c1d0-ff9f-11eb-9054-d393c32ed3b6",
      "authorization_id": "fa99a8f0-fb51-11eb-8a87-41af5f44fd0d",
      "retry_count": 1,
      "max_retry_count": 1,
      "gateway_transaction_id": 162923462083,
      "amount": 11000,
      "wage_amount": "0.00",
      "payment_number": null,
      "track_id": "eb7dfff7-a752-402b-a46b-024545f06c76",
      "status": "FAILED",
      "description": "تست میلاد",
      "withdrawal_date": "1400/05/27",
      "notify_url": null,
      "is_instant": 1,
      "error_code": "01",
      "error_message": "عدم کفایت موجودی"
        },
    ...
  ],
  "links": {
    "first": "https://api.vandar.io/v3/business/vandario/subscription/withdrawal?page=1",
    "last": "https://api.vandar.io/v3/business/vandario/subscription/withdrawal?page=33",
    "prev": null,
    "next": "https://api.vandar.io/v3/business/vandario/subscription/withdrawal?page=2"
  },
  "meta": {
    "current_page": 1,
    "from": 1,
    "last_page": 33,
    "links": [
      {
        "url": null,
        "label": "&laquo; قبلی",
        "active": false
      },
      {
        "url": "https://api.vandar.io/v3/business/vandario/subscription/withdrawal?page=1",
        "label": "1",
        "active": true
      },
      {
        "url": "https://api.vandar.io/v3/business/vandario/subscription/withdrawal?page=2",
        "label": "2",
        "active": false
      },
      {
        "url": null,
        "label": "...",
        "active": false
      },
      {
        "url": "https://api.vandar.io/v3/business/vandario/subscription/withdrawal?page=32",
        "label": "32",
        "active": false
      },
      {
        "url": "https://api.vandar.io/v3/business/vandario/subscription/withdrawal?page=33",
        "label": "33",
        "active": false
      },
      {
        "url": "https://api.vandar.io/v3/business/vandario/subscription/withdrawal?page=2",
        "label": "بعدی &raquo;",
        "active": false
      }
		],
    "path": "https://api.vandar.io/v3/business/vandario/subscription/withdrawal",
    "per_page": 20,
    "to": 20,
    "total": 656
  }
}
</pre>

<ul>
  <li>
    data:
    <ul>
      <li>id: آیدی درخواست برداشت وجه</li>
      <li>authorization_id: آیدی اشتراکی که درخواست برداشت وجه برای آن صادر شده است</li>
      <li>retry_count: تعداد دفعات تلاش برای برداشت وجه</li>
      <li>gateway_transaction_id: شناسه یکتای برداشت وجه</li>
      <li>amount: مبلغ برداشت وجه</li>
      <li>wage_amount: کارمزد </li>
      <li>payment_number: شناسه روش‌های پرداختی برداشت وجه</li>
      <li>track_id: شناسه پیگیری</li>
      <li>status: وضعیت برداشت وجه که ۵ حالت PENDING, DONE, CANCELED, FAILED, REFUND دارد.</li>
      <li>description: توضیحات </li>
      <li>withdrawal_date: تاریخ درخواست برداشت وجه ارسالی توسط شما</li>
      <li>notify_url: آدرس وبهوکی که می‌توانید ارسال کنید تا از وضعیت نهایی این برداشت وجه مطلع شوید که طول آن نباید بیشتر از ۲۰۴۸ کاراکتر باشد. لازم به ذکر است که متد POST برای ارسال به این آدرس در نظر گرفته شده است و فیلدهای withdrawal_id, authorization_id, gateway_transaction_id, status, amount و payment_number برای شما ارسال می‌شود.</li>
      <li>is_instant: نشان دهنده این است که برداشت وجه به صورت آنی انجام شده است یا خیر</li>
      <li>max_retry_count (اختیاری):
          حداکثر تعداد دفعاتی که می‌خواهید برای این برداشت وجه تلاش شود. حداقل ۱ و حداکثر ۱۶ مرتبه می‌توان برای یک برداشت وجه تلاش کرد. دقت داشته باشید که در صورت عدم ارسال این پارامتر، مقدار آن برابر با ۱ در نظر گرفته می‌شود.
          همچنین در نظر داشته باشید این پارامتر برای برداشت وجه‌های آنی (is_instant: 1) برابر با ۱ در نظر گرفته می‌شود (و برداشت وجه آنی بلافاصله پس از استعلام (نمایش برداشت وجه - withdrawal show)، تعیین وضعیت می‌شود که حالت FAILED است یا DONE). در صورتی که برداشت وجه به صورت آنی نباشد (is_instant: 0) اگر برداشت وجه موفقیت‌آمیز باشد (status: DONE) که دیگر تلاشی صورت نمی‌گیرد، اما اگر برداشت وجه به هر دلیل موفقیت‌آمیز نباشد، تا زمانی که برداشت وجه موفقیت‌آمیز شود و یا مقدار retry_count به تعداد max_retry_count برسد سعی به برداشت وجه صورت می‌گیرد. لازم به ذکر است که تا زمانی که برداشت وجه موفقیت‌آمیز نباشد وضعیت آن برداشت وجه به حالت PENDING است و فقط زمانی که مقدار retry_count به max_retry_count (ارسالی از شما) برسد و هنوز برداشت وجه موفقیت‌آمیز نبوده باشد دیگر تلاشی برای برداشت وجه صورت نمی‌گیرد و وضعیت آن برداشت وجه از حالت PENDING به حالت FAILED تبدیل می‌شود.
      </li>
      <li>error_code: کد خطای ناموفق بودن درخواست برداشت وجه</li>
      <li>error_message: متن خطای ناموفق بودن درخواست برداشت وجه</li>
    </ul>
  </li>
  <li>
    links:
    <ul>
      <li>first: آدرس اولین صفحه</li>
      <li>last: آدرس آخرین صفحه</li>
      <li>prev: آدرس صفحه قبل</li>
      <li>next: آدرس صفحه بعد</li>
    </ul>
  </li>
  <li>
    meta:
    <ul>
      <li>current_page: آدرس همین صفحه</li>
      <li>from: شماره اولین آیتمی که در این صفحه آمده است </li>
      <li>last_page: تعداد کل صفحات</li>
      <li>links: آرایه ای قابل استفاده برای نمایش pagination</li>
      <li>path: آدرس خالص بدون صفحه بندی</li>
      <li>per_page: تعداد آیتم در هر صفحه</li>
      <li>to: شماره آخرین آیتمی که در این صفحه آمده است</li>
      <li>total: تعداد کل آیتم ها</li>
    </ul>
  </li>
</ul>

<h3 class="sub-title">
  نمونه پاسخ دریافتی ناموفق:
</h3>
<pre>
<span class="key">HTTP/1.1</span> 401
{
  "status": 0,
  "error": "Unauthenticated"
}
</pre>
<ul>
    <li>
        status (منسوخ شده): ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
        <br>
        1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
        <br>
        0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
    </li>
  <li>errors: آرایه ای از خطا‌ها</li>
</ul>



<h3 class="title" id="show-withdrawal"><a href="#show-withdrawal">
    ۳. نمایش یک برداشت وجه:
</a>
</h3>

<pre>
<span class="key">METHOD:</span> GET
<span class="key">URL:</span> https://api.vandar.io/v3/business/{business}/subscription/withdrawal/{id}
</pre>
<p>پارامتر {business} همان نام انگلیسی کسب و کاری است که قصد دارید یک برداشت وجه از آن را نمایش دهید.</p>
<p>پارامتر {id} همان id مربوط به برداشت وجهی است که قصد نمایش آن را دارید.</p>


<h3 class="sub-title">
  نمونه پاسخ دریافتی موفق:
</h3>
<pre>
<span class="key">HTTP/1.1</span> 200
{
  "status": 1,
  "message": "برداشت وجه با موفقیت به نمایش درآمد.",
  "result": {
    "withdrawal": {
      "id": "f3d084e0-b603-11ea-94ad-ebc7f5bf8e12",
      "authorization_id": "9f307e30-dc77-11ea-830e-7533ca1787c5",
      "retry_count": 1,
      "max_retry_count": 1,
      "gateway_transaction_id": 159281892196,
      "amount": 10000,
      "wage_amount": "200.00",
      "payment_number": null,
      "track_id": "d2c5bf5a-280f-4ee5-8888-3d220b63bcc0",
      "status": "DONE",
      "description": null,
      "withdrawal_date": "1399\/04\/04"
      "notify_url": "http://yourdomain.com/notify/me",
      "is_instant": true
      "error_code": null,
      "error_message": null
      }
    },
  }
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق برای برداشت وجه ناموفق: (error_code و error_message علت و کد خطا را نشان می دهد.)
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 200
{
  "status": 1,
  "message": "برداشت وجه با موفقیت به نمایش درآمد.",
  "result": {
  "withdrawal": {
  "id": "c0fae570-9b64-11eb-9635-1bfa552b96c5",
  "authorization_id": "ac42fcd0-9b64-11eb-af96-abcc98948330",
  "retry_count": 1,
  "max_retry_count": 1,
  "gateway_transaction_id": 159903362213,
  "amount": 2040000,
  "wage_amount": "40000.00",
  "payment_number": null,
  "track_id": "d2c5bf5a-280f-4ee5-8888-3d220b63bcc0",
  "status": "INIT",
  "description": null,
  "withdrawal_date": "1400\/01\/22",
  "notify_url": null,
  "is_instant": 0,
  "error_code": "01",
  "error_message": "عدم کفایت موجودی"
}
</pre>
                        <div class="info">
                            <strong>نکته! </strong>
                            <a href="https://vandarpay.github.io/docs/subscription/#error">لیست تمامی خطا ها در پایین
                                صفحه قرار گرفته است.</a>
                        </div>
                        <ul>
                            <li>
                                status (منسوخ شده): ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛
                                درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن
                                منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به
                                شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا
                                خیر. به طور خلاصه:
                                <br>
                                1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
                                <br>
                                0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
                            </li>
                            <li>message: پیغام برداشت وجه با موفقیت به نمایش درآمد</li>
                            <li>
    result:
    <ul>
      <li>withdrawal:
        <ul>
          <li>id: آیدی درخواست برداشت وجه</li>
          <li>authorization_id: آیدی اشتراکی که درخواست برداشت وجه برای آن صادر شده است</li>
          <li>retry_count: تعداد دفعات تلاش برای برداشت وجه</li>
          <li>gateway_transaction_id: شناسه یکتای برداشت وجه</li>
          <li>amount: مبلغ برداشت وجه</li>
          <li>wage_amount: کارمزد </li>
            <li>payment_number: شناسه روش‌های پرداختی برداشت وجه</li>
            <li>track_id: شناسه پیگیری</li>
            <li>status: وضعیت برداشت وجه که ۵ حالت PENDING, DONE, CANCELED, FAILED, REFUND دارد.</li>
            <li>description: توضیحات</li>
            <li>withdrawal_date: تاریخ درخواست برداشت وجه ارسالی توسط شما</li>
            <li>notify_url: آدرس وبهوکی که می‌توانید ارسال کنید تا از وضعیت نهایی این برداشت وجه مطلع شوید که طول آن نباید بیشتر از ۲۰۴۸ کاراکتر باشد. لازم به ذکر
                است که متد POST برای ارسال به این آدرس در نظر گرفته شده است و فیلدهای withdrawal_id, authorization_id,
                gateway_transaction_id, status, amount و payment_number برای شما ارسال می‌شود.
            </li>
            <li>is_instant: نشان دهنده این است که برداشت وجه به صورت آنی انجام شده است یا خیر</li>
            <li>max_retry_count (اختیاری):
                حداکثر تعداد دفعاتی که می‌خواهید برای این برداشت وجه تلاش شود. حداقل ۱ و حداکثر ۱۶ مرتبه می‌توان برای یک
                برداشت وجه تلاش کرد. دقت داشته باشید که در صورت عدم ارسال این پارامتر، مقدار آن برابر با ۱ در نظر گرفته
                می‌شود.
                همچنین در نظر داشته باشید این پارامتر برای برداشت وجه‌های آنی (is_instant: 1) برابر با ۱ در نظر گرفته
                می‌شود (و برداشت وجه آنی بلافاصله پس از استعلام (نمایش برداشت وجه - withdrawal show)، تعیین وضعیت می‌شود
                که حالت FAILED است یا DONE). در صورتی که برداشت وجه به صورت آنی نباشد (is_instant: 0) اگر برداشت وجه
                موفقیت‌آمیز باشد (status: DONE) که دیگر تلاشی صورت نمی‌گیرد، اما اگر برداشت وجه به هر دلیل موفقیت‌آمیز
                نباشد، تا زمانی که برداشت وجه موفقیت‌آمیز شود و یا مقدار retry_count به تعداد max_retry_count برسد سعی
                به برداشت وجه صورت می‌گیرد. لازم به ذکر است که تا زمانی که برداشت وجه موفقیت‌آمیز نباشد وضعیت آن برداشت
                وجه به حالت PENDING است و فقط زمانی که مقدار retry_count به max_retry_count (ارسالی از شما) برسد و هنوز
                برداشت وجه موفقیت‌آمیز نبوده باشد دیگر تلاشی برای برداشت وجه صورت نمی‌گیرد و وضعیت آن برداشت وجه از حالت
                PENDING به حالت FAILED تبدیل می‌شود.
            </li>
            <li>error_code: کد خطای ناموفق بودن درخواست برداشت وجه</li>
            <li>error_message: متن خطای ناموفق بودن درخواست برداشت وجه</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی ناموفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 401
{
  "status": 0,
  "error": "Unauthenticated"
}
</pre>
                        <p>در صورت عدم کفایت موجودی خطای زیر را در خروجی درخواست دریافت خواهید کرد: </p>


                        <ul>
                            <li>
                                status (منسوخ شده): ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛
                                درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن
                                منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به
                                شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا
                                خیر. به طور خلاصه:
                                <br>
                                1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
                                <br>
                                0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
                            </li>
                            <li>errors: آرایه ای از خطا‌ها</li>
                        </ul>



                        <h3 class="title" id="show-withdrawal-by-track-id"><a href="#show-withdrawal-by-track-id">
                            ۳.۱. نمایش برداشت وجه بر اساس شناسه پیگیری:
                        </a>
                        </h3>

                        <pre>
<span class="key">METHOD:</span> GET
<span class="key">URL:</span> https://api.vandar.io/v3/business/{business}/subscription/withdrawal/track-id/{track_id}
</pre>
                        <p>پارامتر {business} همان نام انگلیسی کسب و کاری است که قصد دارید یک برداشت وجه از آن را نمایش دهید.</p>
                        <p>پارامتر {track_id} همان شناسه پیگیری مربوط به برداشت وجهی است که قصد نمایش آن را دارید.</p>


                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 200
{
  "status": 1,
  "message": "برداشت وجه با موفقیت به نمایش درآمد.",
  "result": {
    "withdrawal": {
      "id": "f3d084e0-b603-11ea-94ad-ebc7f5bf8e12",
      "authorization_id": "9f307e30-dc77-11ea-830e-7533ca1787c5",
      "retry_count": 1,
      "max_retry_count": 1,
      "gateway_transaction_id": 159281892196,
      "amount": 10000,
      "wage_amount": "200.00",
      "payment_number": null,
      "track_id": "d2c5bf5a-280f-4ee5-8888-3d220b63bcc0",
      "status": "DONE",
      "description": null,
      "withdrawal_date": "1399\/04\/04"
      "notify_url": "http://yourdomain.com/notify/me",
      "is_instant": true
      "error_code": null,
      "error_message": null
      }
    },
  }
}
</pre>



          <h3 class="title" id="cancel-withdrawal"><a href="#cancel-withdrawal">
              ۴. انصراف از برداشت وجه:
          </a>
          </h3>

          <p>در صورتی که کاربر از برداشت وجه منصرف شود با صدا زدن متد زیر می تواند انصراف خود را اعلام کند.</p>

<pre>
<span class="key">METHOD:</span> PUT
<span class="key">URL:</span> https://api.vandar.io/v3/business/{business}/subscription/withdrawal/{id}
</pre>
<p>پارامتر {business} همان نام انگلیسی کسب و کاری است که قصد دارید یک برداشت وجه از آن را لغو کنید.</p>
<p>پارامتر {id} همان id مربوط به برداشت وجهی است که قصد لغو آن را دارید.</p>

<h3 class="sub-title">
  نمونه پاسخ دریافتی موفق:
</h3>

<pre>
  <span class="key">HTTP/1.1</span> 200
{
  "status": 1,
  "message": "برداشت وجه با موفقیت لغو گردید.",
  "result": {
    "withdrawal": {
      "id": "8c6e27c0-dbbd-11ea-a2f6-e9c8bf97463f"
    }
  }
}
  </pre>

  <ul>
      <li>
          status (منسوخ شده): ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
          <br>
          1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
          <br>
          0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
      </li>
    <li>message: پیغام برداشت وجه با موفقیت لغو گردید.</li>
    <li>
      result:
      <ul>
        <li>withdrawal:
          <ul>
            <li>id: </li> شناسه‌ی برداشت وجهی که قصد کنسل کردن آن را داشتید.
          </ul>
        </li>
      </ul>
    </li>
  </ul>

  <h3 class="sub-title">
    نمونه پاسخ دریافتی ناموفق:
  </h3>
<pre>
<span class="key">HTTP/1.1</span> 401
{
  "status": 0,
  "error": "Unauthenticated"
}
</pre>

      <ul>
          <li>
              status (منسوخ شده): ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
              <br>
              1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
              <br>
              0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
          </li>
        <li>errors: آرایه ای از خطا‌ها</li>
      </ul>

                        <h3 class="title" id="health">
                            <strong><a href="#health">وضعیت سلامت روش‌های پرداخت‌ی سرویس پرداخت خودکار</a></strong>
                        </h3>

                        <p>در این آدرس ‌می‌توانید از وضعیت سلامت روش‌های پرداخت‌ی سرویس پرداخت خودکار مطلع شوید.</p>
                        <pre>
<span class="key">METHOD:</span> GET
<span class="key">URL:</span> https://health.vandar.io/subscription
                      </pre>

                        <p>با ارسال پارامتر type میتوانید نوع لوگوی روش‌های پرداخت را با توجه به نیاز تغییر دهید.</p>
                        <p>در حال حاضر type های svg و png پشتیبانی می شود که به صورت پیشفرض svg می باشد.</p>
                        <pre>
<span class="key">METHOD:</span> GET
<span class="key">URL:</span> https://health.vandar.io/subscription?type=png
                      </pre>
                        <br>


                        <h2 class="article-header" id="error">
                            <a href="#error"> نمونه خطاهای دریافتی هنگام برداشت وجه ناموفق:</a>
                        </h2>

                        <table class="table" style="direction: ltr;" id="withdrawal_errors_table">
                          <thead>
                          <tr>
                              <th style="text-align: center;">error_code</th>
                              <th style="text-align: center;">error_message</th>
                          </tr>
                          </thead>
                      </table>
                    </div>
                    </article>
              </div>
          </div>
      </div>
  <footer id="footer">
    <div class="container">
        <div class="row" style="text-align: center">
            <div class="col-sm-8 col-xs-6 no-padding-bottom">
                <a href="https://github.com/vandarpay/docs" target="_blank">مخزن گیت‌هاب</a>
            </div>
            <div class="col-sm-4 col-xs-6 text-right no-padding-bottom">2020 &copy; <a href="https://vandar.io" target="_blank">وندار</a></div>
        </div>
    </div>

</footer>
<button onclick="goTop()" id="go_top" title="Go to top">^</button>
<script>
    /* Loop through all dropdown buttons to toggle between hiding and showing its dropdown content - This allows the user to have multiple dropdowns without any conflict */
    var dropdown = document.getElementsByClassName("dropdown-btn");
    var i;

    for (i = 0; i < dropdown.length; i++) {
        dropdown[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var dropdownContent = this.nextElementSibling;
            if (dropdownContent.style.display === "block") {
                dropdownContent.style.display = "none";
            } else {
                dropdownContent.style.display = "block";
            }
        });
    }


    var header = document.getElementById("myHeader");
    var sticky = header.offsetTop;

    window.onscroll = function () {
        var top = document.getElementById("go_top");
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            top.style.display = "block";
        } else {
            top.style.display = "none";
        }
        if (window.pageYOffset  > 320) {
            header.classList.add("fix-sidebar");
        } else {
            header.classList.remove("fix-sidebar");
        }

    };

    function goTop() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    }

    fetch('https://health.vandar.io/subscription')
      .then(function(response) {
        return response.json();
      })
      .then(function(jsonResponse) {

        var banksHealthResponse = jsonResponse;

        var table = document.getElementById("banks_table");
        var banks = banksHealthResponse["result"]["banks"];

        for (var i = 0; i < banks.length ; i++)  {
            if (banks[i]["is_healthy_on_direct_debit"]) {
                var row = table.insertRow(-1);
                var bankName = row.insertCell(0);
                var bankCode = row.insertCell(1);
                var bankIsHealthyDirectDebit = row.insertCell(2);

                bankName.innerHTML = banks[i]["name"];
                bankCode.innerHTML = banks[i]["code"];
                bankIsHealthyDirectDebit.innerHTML = "سالم";
                bankIsHealthyDirectDebit.style.color = "green";
                bankName.style['text-align'] = 'center';
                bankCode.style['text-align'] = 'center';
                bankIsHealthyDirectDebit.style['text-align'] = 'center';
            }
        }

      });

      fetch('https://health.vandar.io/subscription/errors')
      .then(function(response) {
        return response.json();
      })
      .then(function(jsonResponse) {

        var errorsResponse = jsonResponse;

        var withdrawalErrorsTable = document.getElementById("withdrawal_errors_table");
        var tempAuthorizationErrorsTable = document.getElementById("tempAuthorization_errors_table");
        var errors = errorsResponse["data"];

        for (var i = 0; i < errors.length ; i++)  {
            if (errors[i]["type"] == 'withdrawal') {
                var row = withdrawalErrorsTable.insertRow(-1);
                var error_code = row.insertCell(0);
                var error_message = row.insertCell(1);

                error_code.innerHTML = errors[i]["error_code"];
                error_code.style['text-align'] = 'center';
                error_message.innerHTML = errors[i]["error_message"];
                error_message.style['text-align'] = 'right';
            }
            else if (errors[i]["type"] == 'tempMandate') {
                var row = tempAuthorizationErrorsTable.insertRow(-1);
                var error_code = row.insertCell(0);
                var error_message = row.insertCell(1);

                error_code.innerHTML = errors[i]["error_code"];
                error_code.style['text-align'] = 'center';
                error_message.innerHTML = errors[i]["error_message"];
                error_message.style['text-align'] = 'right';
            }
        }

      });


</script></body>
</html>
