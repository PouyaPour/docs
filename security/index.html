<!DOCTYPE html>
<html lang="fa">
<head>
    <title>مستندات وندار | ارایه دهنده راهکارهای پرداخت</title>
    <meta name="description" content="">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <meta name="format-detection" content="telephone=no">
    <link href="https://fonts.googleapis.com/css2?family=Markazi+Text&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.rtl.css">
    <link rel='icon' href='../favicon.ico' type='image/x-icon' >
</head>
<body dir="rtl">
<header id="header">
    <h1>Vandar</h1>
    <h2>مستندات وندار</h2>
</header>

<div class="container">
    <div class="row">
        <div class="col-sm-3">
            <div id="myHeader">
                <ul>
                    <!--                <li>-->
                    <!--                    <a href="https://vandarpay.github.io/docs/" class="active">مفاهیم اولیه</a>-->
                    <!--                    &lt;!&ndash;                    <div class="sidenav">&ndash;&gt;-->
                    <!--                </li>-->

                    <li>
                        <button class="dropdown-btn">مفاهیم اولیه
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/#postman">Postman</a><br>
                            <a href="https://vandarpay.github.io/docs/#start">شروع کنید</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">درگاه پرداخت

                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/ipg/#payment-gateways">ساخت و ویرایش درگاه پرداخت</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#active-ipg">فعال کردن درگاه پرداخت</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#implementation">پیاده سازی فنی درگاه پرداخت</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-1">مرحله اول</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-2">مرحله دوم</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-3">مرحله سوم</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-4">مرحله چهارم</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">دریافت توکن
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/auth/#step-1">مرحله اول</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">کسب‌وکار
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">

                            <a href="https://vandarpay.github.io/docs/business/#information">اطلاعات</a><br>
                            <a href="https://vandarpay.github.io/docs/business/#users">کاربران</a><br>
                            <!--                        </div>-->
                        </div>
                        <!--                        <a href="https://vandarpay.github.io/docs/business">کسب‌وکار</a>-->
                    </li>
                    <li>
                        <button class="dropdown-btn">صورت حساب
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/invoice/#wallet">کیف پول</a><br>
                            <a href="https://vandarpay.github.io/docs/invoice/#transactions">صورت حساب</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">سرویس تسویه
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/settlement/#settlements">لیست تسویه ها</a><br>
                            <a href="https://vandarpay.github.io/docs/settlement/#request-settlement">ثبت درخواست تسویه</a><br>
                            <a href="https://vandarpay.github.io/docs/settlement/#settlement-details">نمایش جزییات یک تسویه</a><br>
                            <a href="https://vandarpay.github.io/docs/settlement/#cancel">لغو یک تسویه</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">  سرویس تسویه گروهی
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/batch-settlement/#batch-settlements-intro">مقدمه</a><br>
                            <a href="https://vandarpay.github.io/docs/batch-settlement/#batch-settlements-index">لیست تسویه های گروهی</a><br>
                            <a href="https://vandarpay.github.io/docs/batch-settlement/#batch-settlements-show">جزییات یک تسویه گروهی</a><br>
                            <a href="https://vandarpay.github.io/docs/batch-settlement/#batch-settlement-store">ثبت یک تسویه گروهی</a><br>
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">سرویس پرداخت خودکار
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/subscription/#directdebit">مقدمه</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/#get-token">سرویس دریافت توکن</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/#withdrawal">سرویس برداشت وجه</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/#error">لیست خطاهای دریافتی</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/better-product-design/" target="_blank">طراحی محصولی بهتر</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">سرویس پرداخت با وندار
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#overview">معرفی سرویس</a><br>
                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#intro">مقدمه</a><br>
                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#send">دریافت توکن</a><br>
                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#redirect">انتقال کاربر</a><br>
                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#inquiry">استعلام</a><br>
                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#verify">تایید</a><br>
                        </div>
                    </li>
                    <li>
                      <button class="dropdown-btn">سرویس مشتریان
                          <br>
                          <i class="fa fa-caret-down"></i>
                      </button>
                      <div class="dropdown-container">
                          <a href="https://vandarpay.github.io/docs/customers/#customers">مقدمه</a><br>
                          <a href="https://vandarpay.github.io/docs/customers/#base">مشتریان</a><br>
                          <a href="https://vandarpay.github.io/docs/customers/#wallet">کیف پول</a><br>
                          <a href="https://vandarpay.github.io/docs/customers/#transactions">تراکنش</a><br>
                          <a href="https://vandarpay.github.io/docs/customers/#sheba">شبا</a><br>
                      </div>
                  </li>
					<li>
						<button class="dropdown-btn">ابزار واریز بانکی
							<br>
							<i class="fa fa-caret-down"></i>
						</button>
						<div class="dropdown-container">
							<a href="https://vandarpay.github.io/docs/cash-in/#intro">مقدمه</a><br>
							<a href="https://vandarpay.github.io/docs/cash-in/#ibans-list">لیست شماره شباها</a><br>
							<a href="https://vandarpay.github.io/docs/cash-in/#get-balance">دریافت موجودی حساب</a><br>
							<a href="https://vandarpay.github.io/docs/cash-in/#deposit">درخواست واریز</a><br>
						</div>
					</li>
                    <li>
                        <a href="https://vandarpay.github.io/docs/refund">بازگشت وجه</a>
                    </li>
                    <li>
                        <a href="https://vandarpay.github.io/docs/banks">بانک‌ها</a>
                    </li>
                    <li>
                        <a href="https://vandarpay.github.io/docs/errors">خطا‌ها</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-sm-9">
            <article class="content">
                <div class="article" id="ipg">
                    <h2 class="article-header">اعتبارسنجی درخواست‌های وندار</h2>
                    <div>
                        <b>آزمایشی</b>: ویژگی امضای درخواست در حال حاضر به شکل آزمایشی تنها در سرویس پرداخت خودکار (برداشت وجه) وندار در دسترس است.
                        <p>
                        در بسیاری از سرویس‌های وندار، شما این امکان را دارید تا با ارائه یک URL، از طریق webhook ارسالی از سمت وندار از وضعیت درخواست خود با خبر شوید.
                        برای مثال، در خدمات برداشت مستقیم وندار، امکان ارائه notify_url برای باخبر شدن سیستمی از وضعیت برداشت فراهم است. 
                        </p>
                        <p>
                            با این حال، هر نشانی قابل دسترسی برای سرویس‌های وندار احتمالا برای منابع دیگری در دسترس باشد. برای جلوگیری از ارسال درخواست‌های جعلی از طریق این خدمت، 
                            وندار زین‌پس درخواست‌های ارسالی خود را از طریق متد HMAC-SHA256 امضا می‌کند و شما می‌توانید صحت درخواست‌های دریافتی از وندار را با این امضا بسنجید.
                        </p>
                    </div>
                    <h3 class="title">
                        <a href="#">
                            <b>فرایند امضای درخواست</b>
                        </a>
                    </h3>
                    <div>
                        <p>
                            برای امضای درخواست‌ها، وندار به ازای هر کسب‌وکار و به شکل خودکار یک کلید خصوصی ایجاد و ذخیره می‌کند.
                            هر کسب‌وکار برای صحت‌سنجی امضای ارسال‌شده توسط وندار، نیازمند این کلید خصوصی خواهد بود. این کلید خصوصی در نهایت به عنوان Secret Key در 
                            امضای HMAC به کار می‌رود.
                            <br>
                        </p>
                        <p>
                            <b>نکته:</b>
                            در حال حاضر، با توجه به آزمایشی بودن این ویژگی، امکان دریافت این کلید خصوصی تنها از طریق ارتباط با پشتیبانی امکان‌پذیر است.
                        </p>
                        <p>
                            متد HMAC در کنار کلید خصوصی شما، به عنوان ورودی، زمان یونیکسی و همچنین محتویات (payload) درخواست را دریافت می‌کند، اطلاعات با کارکتر , از هم تفکیک شده‌اند:
                        </p>
                        <pre>1650412200,{"ok":true}</pre>
                        <p>
                        در نهایت و برای مثال در PHP، از متد زیر برای امضای درخواست استفاده می‌شود:
                        </p>
                        <pre>hash_hmac("sha256", "1650412200,{\"ok\":true}", "Your Key");</pre>
                        <p>
                            در نهایت، درخواست ارسال شده برای کسب‌وکار شامل هدر X-Vandar-Signature حاوی این امضا، امضای سندباکس و زمان یونیکسی است:
                            </p>
    <pre>X-Vandar-Signature: t=1650412200,
        v1=6eb261a3022afe3d61e6dc2387ac2f4005de95debd29ef13630b24ace0887a4c,
        v0=aae62e40b40d3c98cb0c372c683b2eb1a61402102174b45abcc12da8a60b23f4</pre>
                            <p>
                                <b>نکته:</b>
                                در نظر داشته باشید هدر ارسالی توسط وندار در یک خط ارسال می‌شود، در اینجا برای خوانایی بهتر، هدر در چندین خط نمایش داده شده است.
                            </p>
                            <p>
                                در اینجا، t زمان یونیکسی ارسال درخواست، v1 امضای واقعی درخواست و v0 امضای سندباکس برای این درخواست است.
                                امضای سندباکس همواره با کلید خصوصی vandar انجام می‌شود و نباید برای اعتبارسنجی خارج از محیط تست استفاده شود.
                            </p>
                    </div>

                    <h3>
                        <a href="#">
                            <b>صحت‌سنجی</b>
                        </a>
                    </h3>
                    <div>
                        <p>
                            برای صحت‌سنجی امضای ارسال‌شده، شما با امضا کردن دوباره درخواست مطابق حالت بالا و بررسی تطابق امضای محاسبه‌شده با امضای وندار می‌توانید از صحت درخواست اطمینان حاصل کنید.
                        </p>
                        <p>
                            همچنین در صورت در دست نداشتن کلید خصوصی فعلی، شما می‌توانید از طریق بررسی کلید سندباکس (vandar) و تطابق امضا با آن، پیاده‌سازی خود را در محیط تست بررسی کنید.
                        </p>
                    </div>

                    <h3>
                        <a href="#">
                            <b>جلوگیری از Replay-Attack</b>
                        </a>
                    </h3>
                    <div>
                        <p>
                            به‌طور معمول، درخواست‌های وندار در کمتر از ۱ ثانیه به کسب‌وکارها می‌رسند. برای جلوگیری از حملات Replay (ارسال دوباره یک درخواست)
                            پیشنهاد می‌کنیم در صورتی که بیش از ۵ ثانیه از زمان ارسال درخواست گذشته است (مقدار t)
                            با خطای ۴۰۰ به درخواست پاسخ دهید.
                        </p>
                    </div>
                    
                </div>
            </article>
              </div>
          </div>
      </div>
  <footer id="footer">
    <div class="container">
        <div class="row" style="text-align: center">
            <div class="col-sm-8 col-xs-6 no-padding-bottom">
                <a href="https://github.com/vandarpay/docs" target="_blank">مخزن گیت‌هاب</a>
            </div>
            <div class="col-sm-4 col-xs-6 text-right no-padding-bottom">2020 &copy; <a href="https://vandar.io" target="_blank">وندار</a></div>
        </div>
    </div>

</footer>
<button onclick="goTop()" id="go_top" title="Go to top">^</button>
<script>
    /* Loop through all dropdown buttons to toggle between hiding and showing its dropdown content - This allows the user to have multiple dropdowns without any conflict */
    var dropdown = document.getElementsByClassName("dropdown-btn");
    var i;

    for (i = 0; i < dropdown.length; i++) {
        dropdown[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var dropdownContent = this.nextElementSibling;
            if (dropdownContent.style.display === "block") {
                dropdownContent.style.display = "none";
            } else {
                dropdownContent.style.display = "block";
            }
        });
    }


    var header = document.getElementById("myHeader");
    var sticky = header.offsetTop;

    window.onscroll = function () {
        var top = document.getElementById("go_top");
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            top.style.display = "block";
        } else {
            top.style.display = "none";
        }
        if (window.pageYOffset  > 320) {
            header.classList.add("fix-sidebar");
        } else {
            header.classList.remove("fix-sidebar");
        }

    };

    function goTop() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    }
</script></body>
</html>
